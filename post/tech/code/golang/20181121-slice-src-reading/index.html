

There are two possible situations that led to this error:
  1. You haven&#39;t copied the config.toml yet. See https://github.com/olOwOlo/hugo-theme-even#installation 
  2. You have an incompatible update. See https://github.com/olOwOlo/hugo-theme-even/blob/master/CHANGELOG.md#400-2018-11-06 

æœ‰ä¸¤ç§å¯èƒ½çš„æƒ…å†µä¼šå¯¼è‡´è¿™ä¸ªé”™è¯¯å‘ç”Ÿ:
  1. ä½ è¿˜æ²¡æœ‰å¤åˆ¶ config.toml å‚è€ƒ https://github.com/olOwOlo/hugo-theme-even/blob/master/README-zh.md#installation 
  2. ä½ è¿›è¡Œäº†ä¸€æ¬¡ä¸å…¼å®¹çš„æ›´æ–° å‚è€ƒ https://github.com/olOwOlo/hugo-theme-even/blob/master/CHANGELOG.md#400-2018-11-06 
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>[è½¬] Golang | Slice æ·±å…¥ç†è§£ - Zher</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="zher" /><meta name="description" content=" è½¬è‡ªï¼šæ·±å…¥è§£æ Go ä¸­ Slice åº•å±‚å®ç°
 
" /><meta name="keywords" content="zher, blog, tech, essay, life, footprint" />






<meta name="generator" content="Hugo 0.46 with even 4.0.0" />


<link rel="canonical" href="https://zhezh09.github.io/post/tech/code/golang/20181121-slice-src-reading/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script src="https://cdn.jsdelivr.net/npm/eruda@1.2.6/eruda.min.js" integrity="sha256-Jmz4bc3kp+rRrXX2tGadNBKFLwtzMapr8kHABxSAAP8=" crossorigin="anonymous"></script>
<script>eruda.init();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.93844dae.min.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="[è½¬] Golang | Slice æ·±å…¥ç†è§£" />
<meta property="og:description" content="


è½¬è‡ªï¼šæ·±å…¥è§£æ Go ä¸­ Slice åº•å±‚å®ç°


" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhezh09.github.io/post/tech/code/golang/20181121-slice-src-reading/" />



<meta property="article:published_time" content="2018-11-21T14:06:08&#43;08:00"/>

<meta property="article:modified_time" content="2018-11-29T14:06:08&#43;00:00"/>











<meta itemprop="name" content="[è½¬] Golang | Slice æ·±å…¥ç†è§£">
<meta itemprop="description" content="


è½¬è‡ªï¼šæ·±å…¥è§£æ Go ä¸­ Slice åº•å±‚å®ç°


">


<meta itemprop="datePublished" content="2018-11-21T14:06:08&#43;08:00" />
<meta itemprop="dateModified" content="2018-11-21T14:06:08&#43;08:00" />
<meta itemprop="wordCount" content="5754">



<meta itemprop="keywords" content="golang," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[è½¬] Golang | Slice æ·±å…¥ç†è§£"/>
<meta name="twitter:description" content="


è½¬è‡ªï¼šæ·±å…¥è§£æ Go ä¸­ Slice åº•å±‚å®ç°


"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Zher</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/categories/footprint/">
        <li class="mobile-menu-item">FootPrint</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Zher</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/footprint/">FootPrint</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">[è½¬] Golang | Slice æ·±å…¥ç†è§£</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-11-21 </span>
        <div class="post-category">
            <a href="/categories/tech/"> tech </a>
            </div>
          <span class="more-meta"> 5754 words </span>
          <span class="more-meta"> 12 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li><a href="#æ·±å…¥è§£æ-go-ä¸­-slice-åº•å±‚å®ç°">æ·±å…¥è§£æ Go ä¸­ Slice åº•å±‚å®ç°</a>
<ul>
<li><a href="#ä¸€-åˆ‡ç‰‡å’Œæ•°ç»„">ä¸€. åˆ‡ç‰‡å’Œæ•°ç»„</a></li>
<li><a href="#äºŒ-åˆ‡ç‰‡çš„æ•°æ®ç»“æ„">äºŒ. åˆ‡ç‰‡çš„æ•°æ®ç»“æ„</a></li>
<li><a href="#ä¸‰-åˆ›å»ºåˆ‡ç‰‡">ä¸‰. åˆ›å»ºåˆ‡ç‰‡</a>
<ul>
<li><a href="#1-make-å’Œåˆ‡ç‰‡å­—é¢é‡">1. make å’Œåˆ‡ç‰‡å­—é¢é‡</a></li>
<li><a href="#2-nil-å’Œç©ºåˆ‡ç‰‡">2. nil å’Œç©ºåˆ‡ç‰‡</a></li>
</ul></li>
<li><a href="#å››-åˆ‡ç‰‡æ‰©å®¹">å››. åˆ‡ç‰‡æ‰©å®¹</a>
<ul>
<li>
<ul>
<li><a href="#1-æ‰©å®¹ç­–ç•¥">1. æ‰©å®¹ç­–ç•¥</a></li>
<li><a href="#2-æ–°æ•°ç»„-or-è€æ•°ç»„">2. æ–°æ•°ç»„ or è€æ•°ç»„ ï¼Ÿ</a></li>
</ul></li>
</ul></li>
<li><a href="#äº”-åˆ‡ç‰‡æ‹·è´">äº”. åˆ‡ç‰‡æ‹·è´</a></li>
</ul></li>
<li><a href="#see-also">See Also</a></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <!-- æ‘˜è¦ -->

<blockquote>
<p><a href="https://halfrost.com/go_slice/#">è½¬è‡ªï¼šæ·±å…¥è§£æ Go ä¸­ Slice åº•å±‚å®ç°</a></p>
</blockquote>

<p></p>

<h1 id="æ·±å…¥è§£æ-go-ä¸­-slice-åº•å±‚å®ç°">æ·±å…¥è§£æ Go ä¸­ Slice åº•å±‚å®ç°</h1>

<p>åˆ‡ç‰‡æ˜¯ Go ä¸­çš„ä¸€ç§åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨è¿™ç§ç»“æ„å¯ä»¥ç”¨æ¥ç®¡ç†æ•°æ®é›†åˆã€‚åˆ‡ç‰‡çš„è®¾è®¡æƒ³æ³•æ˜¯ç”±åŠ¨æ€æ•°ç»„æ¦‚å¿µè€Œæ¥ï¼Œä¸ºäº†å¼€å‘è€…å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„ä½¿ä¸€ä¸ªæ•°æ®ç»“æ„å¯ä»¥è‡ªåŠ¨å¢åŠ å’Œå‡å°‘ã€‚ä½†æ˜¯åˆ‡ç‰‡æœ¬èº«å¹¶ä¸æ˜¯åŠ¨æ€æ•°æ®æˆ–è€…æ•°ç»„æŒ‡é’ˆã€‚åˆ‡ç‰‡å¸¸è§çš„æ“ä½œæœ‰ resliceã€appendã€copyã€‚ä¸æ­¤åŒæ—¶ï¼Œåˆ‡ç‰‡è¿˜å…·æœ‰å¯ç´¢å¼•ï¼Œå¯è¿­ä»£çš„ä¼˜ç§€ç‰¹æ€§ã€‚</p>

<h2 id="ä¸€-åˆ‡ç‰‡å’Œæ•°ç»„">ä¸€. åˆ‡ç‰‡å’Œæ•°ç»„</h2>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-168e0799620a2cdb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>å…³äºåˆ‡ç‰‡å’Œæ•°ç»„æ€ä¹ˆé€‰æ‹©ï¼Ÿæ¥ä¸‹æ¥å¥½å¥½è®¨è®ºè®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚</p>

<p>åœ¨ Go ä¸­ï¼Œä¸ C æ•°ç»„å˜é‡éšå¼ä½œä¸ºæŒ‡é’ˆä½¿ç”¨ä¸åŒï¼ŒGo æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œèµ‹å€¼å’Œå‡½æ•°ä¼ å‚æ“ä½œéƒ½ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„æ•°æ®ã€‚</p>

<pre><code class="language-go">
func main() {
	arrayA := [2]int{100, 200}
	var arrayB [2]int

	arrayB = arrayA

	fmt.Printf(&quot;arrayA : %p , %v\n&quot;, &amp;arrayA, arrayA)
	fmt.Printf(&quot;arrayB : %p , %v\n&quot;, &amp;arrayB, arrayB)

	testArray(arrayA)
}

func testArray(x [2]int) {
	fmt.Printf(&quot;func Array : %p , %v\n&quot;, &amp;x, x)
}

</code></pre>

<p>æ‰“å°ç»“æœï¼š</p>

<pre><code class="language-go">
arrayA : 0xc4200bebf0 , [100 200]
arrayB : 0xc4200bec00 , [100 200]
func Array : 0xc4200bec30 , [100 200]

</code></pre>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸‰ä¸ªå†…å­˜åœ°å€éƒ½ä¸åŒï¼Œè¿™ä¹Ÿå°±éªŒè¯äº† Go ä¸­æ•°ç»„èµ‹å€¼å’Œå‡½æ•°ä¼ å‚éƒ½æ˜¯å€¼å¤åˆ¶çš„ã€‚é‚£è¿™ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p>

<p>å‡æƒ³æ¯æ¬¡ä¼ å‚éƒ½ç”¨æ•°ç»„ï¼Œé‚£ä¹ˆæ¯æ¬¡æ•°ç»„éƒ½è¦è¢«å¤åˆ¶ä¸€éã€‚å¦‚æœæ•°ç»„å¤§å°æœ‰ 100ä¸‡ï¼Œåœ¨64ä½æœºå™¨ä¸Šå°±éœ€è¦èŠ±è´¹å¤§çº¦ 800W å­—èŠ‚ï¼Œå³ 8MB å†…å­˜ã€‚è¿™æ ·ä¼šæ¶ˆè€—æ‰å¤§é‡çš„å†…å­˜ã€‚äºæ˜¯ä¹æœ‰äººæƒ³åˆ°ï¼Œå‡½æ•°ä¼ å‚ç”¨æ•°ç»„çš„æŒ‡é’ˆã€‚</p>

<pre><code class="language-go">
func main() {
	arrayA := [2]int{100, 200}
	testArrayPoint(&amp;arrayA)   // 1.ä¼ æ•°ç»„æŒ‡é’ˆ
	arrayB := arrayA[:]
	testArrayPoint(&amp;arrayB)   // 2.ä¼ åˆ‡ç‰‡
	fmt.Printf(&quot;arrayA : %p , %v\n&quot;, &amp;arrayA, arrayA)
}

func testArrayPoint(x *[]int) {
	fmt.Printf(&quot;func Array : %p , %v\n&quot;, x, *x)
	(*x)[1] += 100
}

</code></pre>

<p>æ‰“å°ç»“æœï¼š</p>

<pre><code class="language-go">
func Array : 0xc4200b0140 , [100 200]
func Array : 0xc4200b0180 , [100 300]
arrayA : 0xc4200b0140 , [100 400]

</code></pre>

<p>è¿™ä¹Ÿå°±è¯æ˜äº†æ•°ç»„æŒ‡é’ˆç¡®å®åˆ°è¾¾äº†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚ç°åœ¨å°±ç®—æ˜¯ä¼ å…¥10äº¿çš„æ•°ç»„ï¼Œä¹Ÿåªéœ€è¦å†æ ˆä¸Šåˆ†é…ä¸€ä¸ª8ä¸ªå­—èŠ‚çš„å†…å­˜ç»™æŒ‡é’ˆå°±å¯ä»¥äº†ã€‚è¿™æ ·æ›´åŠ é«˜æ•ˆçš„åˆ©ç”¨å†…å­˜ï¼Œæ€§èƒ½ä¹Ÿæ¯”ä¹‹å‰çš„å¥½ã€‚</p>

<p>ä¸è¿‡ä¼ æŒ‡é’ˆä¼šæœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œä»æ‰“å°ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡ŒæŒ‡é’ˆåœ°å€éƒ½æ˜¯åŒä¸€ä¸ªï¼Œä¸‡ä¸€åŸæ•°ç»„çš„æŒ‡é’ˆæŒ‡å‘æ›´æ”¹äº†ï¼Œé‚£ä¹ˆå‡½æ•°é‡Œé¢çš„æŒ‡é’ˆæŒ‡å‘éƒ½ä¼šè·Ÿç€æ›´æ”¹ã€‚</p>

<p>åˆ‡ç‰‡çš„ä¼˜åŠ¿ä¹Ÿå°±è¡¨ç°å‡ºæ¥äº†ã€‚ç”¨åˆ‡ç‰‡ä¼ æ•°ç»„å‚æ•°ï¼Œæ—¢å¯ä»¥è¾¾åˆ°èŠ‚çº¦å†…å­˜çš„ç›®çš„ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°åˆç†å¤„ç†å¥½å…±äº«å†…å­˜çš„é—®é¢˜ã€‚æ‰“å°ç»“æœç¬¬äºŒè¡Œå°±æ˜¯åˆ‡ç‰‡ï¼Œåˆ‡ç‰‡çš„æŒ‡é’ˆå’ŒåŸæ¥æ•°ç»„çš„æŒ‡é’ˆæ˜¯ä¸åŒçš„ã€‚</p>

<p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š</p>

<p>æŠŠç¬¬ä¸€ä¸ªå¤§æ•°ç»„ä¼ é€’ç»™å‡½æ•°ä¼šæ¶ˆè€—å¾ˆå¤šå†…å­˜ï¼Œé‡‡ç”¨åˆ‡ç‰‡çš„æ–¹å¼ä¼ å‚å¯ä»¥é¿å…ä¸Šè¿°é—®é¢˜ã€‚åˆ‡ç‰‡æ˜¯å¼•ç”¨ä¼ é€’ï¼Œæ‰€ä»¥å®ƒä»¬ä¸éœ€è¦ä½¿ç”¨é¢å¤–çš„å†…å­˜å¹¶ä¸”æ¯”ä½¿ç”¨æ•°ç»„æ›´æœ‰æ•ˆç‡ã€‚</p>

<p>ä½†æ˜¯ï¼Œä¾æ—§æœ‰åä¾‹ã€‚</p>

<pre><code class="language-go">
package main

import &quot;testing&quot;

func array() [1024]int {
	var x [1024]int
	for i := 0; i &lt; len(x); i++ {
		x[i] = i
	}
	return x
}

func slice() []int {
	x := make([]int, 1024)
	for i := 0; i &lt; len(x); i++ {
		x[i] = i
	}
	return x
}

func BenchmarkArray(b *testing.B) {
	for i := 0; i &lt; b.N; i++ {
		array()
	}
}

func BenchmarkSlice(b *testing.B) {
	for i := 0; i &lt; b.N; i++ {
		slice()
	}
}

</code></pre>

<p>æˆ‘ä»¬åšä¸€æ¬¡æ€§èƒ½æµ‹è¯•ï¼Œå¹¶ä¸”ç¦ç”¨å†…è”å’Œä¼˜åŒ–ï¼Œæ¥è§‚å¯Ÿåˆ‡ç‰‡çš„å †ä¸Šå†…å­˜åˆ†é…çš„æƒ…å†µã€‚</p>

<pre><code class="language-go">
  go test -bench . -benchmem -gcflags &quot;-N -l&quot;

</code></pre>

<p>è¾“å‡ºç»“æœæ¯”è¾ƒâ€œä»¤äººæ„å¤–â€ï¼š</p>

<pre><code class="language-vim">
BenchmarkArray-4          500000              3637 ns/op               0 B/op          0 alloc s/op
BenchmarkSlice-4          300000              4055 ns/op            8192 B/op          1 alloc s/op

</code></pre>

<p>è§£é‡Šä¸€ä¸‹ä¸Šè¿°ç»“æœï¼Œåœ¨æµ‹è¯• Array çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯4æ ¸ï¼Œå¾ªç¯æ¬¡æ•°æ˜¯500000ï¼Œå¹³å‡æ¯æ¬¡æ‰§è¡Œæ—¶é—´æ˜¯3637 nsï¼Œæ¯æ¬¡æ‰§è¡Œå †ä¸Šåˆ†é…å†…å­˜æ€»é‡æ˜¯0ï¼Œåˆ†é…æ¬¡æ•°ä¹Ÿæ˜¯0 ã€‚</p>

<p>è€Œåˆ‡ç‰‡çš„ç»“æœå°±â€œå·®â€ä¸€ç‚¹ï¼ŒåŒæ ·ä¹Ÿæ˜¯ç”¨çš„æ˜¯4æ ¸ï¼Œå¾ªç¯æ¬¡æ•°æ˜¯300000ï¼Œå¹³å‡æ¯æ¬¡æ‰§è¡Œæ—¶é—´æ˜¯4055 nsï¼Œä½†æ˜¯æ¯æ¬¡æ‰§è¡Œä¸€æ¬¡ï¼Œå †ä¸Šåˆ†é…å†…å­˜æ€»é‡æ˜¯8192ï¼Œåˆ†é…æ¬¡æ•°ä¹Ÿæ˜¯1 ã€‚</p>

<p>è¿™æ ·å¯¹æ¯”çœ‹æ¥ï¼Œå¹¶éæ‰€æœ‰æ—¶å€™éƒ½é€‚åˆç”¨åˆ‡ç‰‡ä»£æ›¿æ•°ç»„ï¼Œå› ä¸ºåˆ‡ç‰‡åº•å±‚æ•°ç»„å¯èƒ½ä¼šåœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œè€Œä¸”å°æ•°ç»„åœ¨æ ˆä¸Šæ‹·è´çš„æ¶ˆè€—ä¹Ÿæœªå¿…æ¯” make æ¶ˆè€—å¤§ã€‚</p>

<h2 id="äºŒ-åˆ‡ç‰‡çš„æ•°æ®ç»“æ„">äºŒ. åˆ‡ç‰‡çš„æ•°æ®ç»“æ„</h2>

<p>åˆ‡ç‰‡æœ¬èº«å¹¶ä¸æ˜¯åŠ¨æ€æ•°ç»„æˆ–è€…æ•°ç»„æŒ‡é’ˆã€‚å®ƒå†…éƒ¨å®ç°çš„æ•°æ®ç»“æ„é€šè¿‡æŒ‡é’ˆå¼•ç”¨åº•å±‚æ•°ç»„ï¼Œè®¾å®šç›¸å…³å±æ€§å°†æ•°æ®è¯»å†™æ“ä½œé™å®šåœ¨æŒ‡å®šçš„åŒºåŸŸå†…ã€‚<strong>åˆ‡ç‰‡æœ¬èº«æ˜¯ä¸€ä¸ªåªè¯»å¯¹è±¡ï¼Œå…¶å·¥ä½œæœºåˆ¶ç±»ä¼¼æ•°ç»„æŒ‡é’ˆçš„ä¸€ç§å°è£…</strong>ã€‚</p>

<p>åˆ‡ç‰‡ï¼ˆsliceï¼‰æ˜¯å¯¹æ•°ç»„ä¸€ä¸ªè¿ç»­ç‰‡æ®µçš„å¼•ç”¨ï¼Œæ‰€ä»¥åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼ˆå› æ­¤æ›´ç±»ä¼¼äº C/C++ ä¸­çš„æ•°ç»„ç±»å‹ï¼Œæˆ–è€… Python ä¸­çš„ list ç±»å‹ï¼‰ã€‚è¿™ä¸ªç‰‡æ®µå¯ä»¥æ˜¯æ•´ä¸ªæ•°ç»„ï¼Œæˆ–è€…æ˜¯ç”±èµ·å§‹å’Œç»ˆæ­¢ç´¢å¼•æ ‡è¯†çš„ä¸€äº›é¡¹çš„å­é›†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç»ˆæ­¢ç´¢å¼•æ ‡è¯†çš„é¡¹ä¸åŒ…æ‹¬åœ¨åˆ‡ç‰‡å†…ã€‚åˆ‡ç‰‡æä¾›äº†ä¸€ä¸ªä¸æŒ‡å‘æ•°ç»„çš„åŠ¨æ€çª—å£ã€‚</p>

<p>ç»™å®šé¡¹çš„åˆ‡ç‰‡ç´¢å¼•å¯èƒ½æ¯”ç›¸å…³æ•°ç»„çš„ç›¸åŒå…ƒç´ çš„ç´¢å¼•å°ã€‚å’Œæ•°ç»„ä¸åŒçš„æ˜¯ï¼Œåˆ‡ç‰‡çš„é•¿åº¦å¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹ï¼Œæœ€å°ä¸º 0 æœ€å¤§ä¸ºç›¸å…³æ•°ç»„çš„é•¿åº¦ï¼šåˆ‡ç‰‡æ˜¯ä¸€ä¸ªé•¿åº¦å¯å˜çš„æ•°ç»„ã€‚</p>

<p>Slice çš„æ•°æ®ç»“æ„å®šä¹‰å¦‚ä¸‹:</p>

<pre><code class="language-go">
type slice struct {
	array unsafe.Pointer
	len   int
	cap   int
}

</code></pre>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-50696670e6dd60ca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>åˆ‡ç‰‡çš„ç»“æ„ä½“ç”±3éƒ¨åˆ†æ„æˆï¼ŒPointer æ˜¯æŒ‡å‘ä¸€ä¸ªæ•°ç»„çš„æŒ‡é’ˆï¼Œlen ä»£è¡¨å½“å‰åˆ‡ç‰‡çš„é•¿åº¦ï¼Œcap æ˜¯å½“å‰åˆ‡ç‰‡çš„å®¹é‡ã€‚cap æ€»æ˜¯å¤§äºç­‰äº len çš„ã€‚</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-7bd2c2afe0cf630d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>å¦‚æœæƒ³ä» slice ä¸­å¾—åˆ°ä¸€å—å†…å­˜åœ°å€ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>

<pre><code class="language-go">
s := make([]byte, 200)
ptr := unsafe.Pointer(&amp;s[0])

</code></pre>

<p>å¦‚æœåè¿‡æ¥å‘¢ï¼Ÿä» Go çš„å†…å­˜åœ°å€ä¸­æ„é€ ä¸€ä¸ª sliceã€‚</p>

<pre><code class="language-go">
var ptr unsafe.Pointer
var s1 = struct {
    addr uintptr
    len int
    cap int
}{ptr, length, length}
s := *(*[]byte)(unsafe.Pointer(&amp;s1))

</code></pre>

<p>æ„é€ ä¸€ä¸ªè™šæ‹Ÿçš„ç»“æ„ä½“ï¼ŒæŠŠ slice çš„æ•°æ®ç»“æ„æ‹¼å‡ºæ¥ã€‚</p>

<p>å½“ç„¶è¿˜æœ‰æ›´åŠ ç›´æ¥çš„æ–¹æ³•ï¼Œåœ¨ Go çš„åå°„ä¸­å°±å­˜åœ¨ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„æ•°æ®ç»“æ„ SliceHeaderï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ„é€ ä¸€ä¸ª slice</p>

<pre><code class="language-go">
var o []byte
sliceHeader := (*reflect.SliceHeader)((unsafe.Pointer(&amp;o)))
sliceHeader.Cap = length
sliceHeader.Len = length
sliceHeader.Data = uintptr(ptr)

</code></pre>

<h2 id="ä¸‰-åˆ›å»ºåˆ‡ç‰‡">ä¸‰. åˆ›å»ºåˆ‡ç‰‡</h2>

<p>make å‡½æ•°å…è®¸åœ¨è¿è¡ŒæœŸåŠ¨æ€æŒ‡å®šæ•°ç»„é•¿åº¦ï¼Œç»•å¼€äº†æ•°ç»„ç±»å‹å¿…é¡»ä½¿ç”¨ç¼–è¯‘æœŸå¸¸é‡çš„é™åˆ¶ã€‚</p>

<p>åˆ›å»ºåˆ‡ç‰‡æœ‰ä¸¤ç§å½¢å¼ï¼Œmake åˆ›å»ºåˆ‡ç‰‡ï¼Œç©ºåˆ‡ç‰‡ã€‚</p>

<h3 id="1-make-å’Œåˆ‡ç‰‡å­—é¢é‡">1. make å’Œåˆ‡ç‰‡å­—é¢é‡</h3>

<pre><code class="language-go">
func makeslice(et *_type, len, cap int) slice {
	// æ ¹æ®åˆ‡ç‰‡çš„æ•°æ®ç±»å‹ï¼Œè·å–åˆ‡ç‰‡çš„æœ€å¤§å®¹é‡
	maxElements := maxSliceCap(et.size)
    // æ¯”è¾ƒåˆ‡ç‰‡çš„é•¿åº¦ï¼Œé•¿åº¦å€¼åŸŸåº”è¯¥åœ¨[0,maxElements]ä¹‹é—´
	if len &lt; 0 || uintptr(len) &gt; maxElements {
		panic(errorString(&quot;makeslice: len out of range&quot;))
	}
    // æ¯”è¾ƒåˆ‡ç‰‡çš„å®¹é‡ï¼Œå®¹é‡å€¼åŸŸåº”è¯¥åœ¨[len,maxElements]ä¹‹é—´
	if cap &lt; len || uintptr(cap) &gt; maxElements {
		panic(errorString(&quot;makeslice: cap out of range&quot;))
	}
    // æ ¹æ®åˆ‡ç‰‡çš„å®¹é‡ç”³è¯·å†…å­˜
	p := mallocgc(et.size*uintptr(cap), et, true)
    // è¿”å›ç”³è¯·å¥½å†…å­˜çš„åˆ‡ç‰‡çš„é¦–åœ°å€
	return slice{p, len, cap}
}

</code></pre>

<p>è¿˜æœ‰ä¸€ä¸ª int64 çš„ç‰ˆæœ¬ï¼š</p>

<pre><code class="language-go">
func makeslice64(et *_type, len64, cap64 int64) slice {
	len := int(len64)
	if int64(len) != len64 {
		panic(errorString(&quot;makeslice: len out of range&quot;))
	}

	cap := int(cap64)
	if int64(cap) != cap64 {
		panic(errorString(&quot;makeslice: cap out of range&quot;))
	}

	return makeslice(et, len, cap)
}

</code></pre>

<p>å®ç°åŸç†å’Œä¸Šé¢çš„æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡å¤šäº†æŠŠ int64 è½¬æ¢æˆ int è¿™ä¸€æ­¥ç½¢äº†ã€‚</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-f2ef58e1c51dbdca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>ä¸Šå›¾æ˜¯ç”¨ make å‡½æ•°åˆ›å»ºçš„ä¸€ä¸ª len = 4ï¼Œ cap = 6 çš„åˆ‡ç‰‡ã€‚å†…å­˜ç©ºé—´ç”³è¯·äº†6ä¸ª int ç±»å‹çš„å†…å­˜å¤§å°ã€‚ç”±äº len = 4ï¼Œæ‰€ä»¥åé¢2ä¸ªæš‚æ—¶è®¿é—®ä¸åˆ°ï¼Œä½†æ˜¯å®¹é‡è¿˜æ˜¯åœ¨çš„ã€‚è¿™æ—¶å€™æ•°ç»„é‡Œé¢æ¯ä¸ªå˜é‡éƒ½æ˜¯0 ã€‚</p>

<p>é™¤äº† make å‡½æ•°å¯ä»¥åˆ›å»ºåˆ‡ç‰‡ä»¥å¤–ï¼Œå­—é¢é‡ä¹Ÿå¯ä»¥åˆ›å»ºåˆ‡ç‰‡ã€‚</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-a071b77f73cc1caf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>è¿™é‡Œæ˜¯ç”¨å­—é¢é‡åˆ›å»ºçš„ä¸€ä¸ª len = 6ï¼Œcap = 6 çš„åˆ‡ç‰‡ï¼Œè¿™æ—¶å€™æ•°ç»„é‡Œé¢æ¯ä¸ªå…ƒç´ çš„å€¼éƒ½åˆå§‹åŒ–å®Œæˆäº†ã€‚<strong>éœ€è¦æ³¨æ„çš„æ˜¯ [ ] é‡Œé¢ä¸è¦å†™æ•°ç»„çš„å®¹é‡ï¼Œå› ä¸ºå¦‚æœå†™äº†ä¸ªæ•°ä»¥åå°±æ˜¯æ•°ç»„äº†ï¼Œè€Œä¸æ˜¯åˆ‡ç‰‡äº†ã€‚</strong></p>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-ca3efc461762e51a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>è¿˜æœ‰ä¸€ç§ç®€å•çš„å­—é¢é‡åˆ›å»ºåˆ‡ç‰‡çš„æ–¹æ³•ã€‚å¦‚ä¸Šå›¾ã€‚ä¸Šå›¾å°± Slice A åˆ›å»ºå‡ºäº†ä¸€ä¸ª len = 3ï¼Œcap = 3 çš„åˆ‡ç‰‡ã€‚ä»åŸæ•°ç»„çš„ç¬¬äºŒä½å…ƒç´ (0æ˜¯ç¬¬ä¸€ä½)å¼€å§‹åˆ‡ï¼Œä¸€ç›´åˆ‡åˆ°ç¬¬å››ä½ä¸ºæ­¢(ä¸åŒ…æ‹¬ç¬¬äº”ä½)ã€‚åŒç†ï¼ŒSlice B åˆ›å»ºå‡ºäº†ä¸€ä¸ª len = 2ï¼Œcap = 4 çš„åˆ‡ç‰‡ã€‚</p>

<h3 id="2-nil-å’Œç©ºåˆ‡ç‰‡">2. nil å’Œç©ºåˆ‡ç‰‡</h3>

<p>nil åˆ‡ç‰‡å’Œç©ºåˆ‡ç‰‡ä¹Ÿæ˜¯å¸¸ç”¨çš„ã€‚</p>

<pre><code class="language-go">
var slice []int

</code></pre>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-171ae1a89c3b1579.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>nil åˆ‡ç‰‡è¢«ç”¨åœ¨å¾ˆå¤šæ ‡å‡†åº“å’Œå†…ç½®å‡½æ•°ä¸­ï¼Œæè¿°ä¸€ä¸ªä¸å­˜åœ¨çš„åˆ‡ç‰‡çš„æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ° nil åˆ‡ç‰‡ã€‚æ¯”å¦‚å‡½æ•°åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼Œè¿”å›çš„åˆ‡ç‰‡å°±æ˜¯ nil åˆ‡ç‰‡ã€‚nil åˆ‡ç‰‡çš„æŒ‡é’ˆæŒ‡å‘ nilã€‚</p>

<p>ç©ºåˆ‡ç‰‡ä¸€èˆ¬ä¼šç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç©ºçš„é›†åˆã€‚æ¯”å¦‚æ•°æ®åº“æŸ¥è¯¢ï¼Œä¸€æ¡ç»“æœä¹Ÿæ²¡æœ‰æŸ¥åˆ°ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿”å›ä¸€ä¸ªç©ºåˆ‡ç‰‡ã€‚</p>

<pre><code class="language-go">
silce := make( []int , 0 )
slice := []int{ }

</code></pre>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-c09c59f12e3bfedd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>ç©ºåˆ‡ç‰‡å’Œ nil åˆ‡ç‰‡çš„åŒºåˆ«åœ¨äºï¼Œç©ºåˆ‡ç‰‡æŒ‡å‘çš„åœ°å€ä¸æ˜¯nilï¼ŒæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰åˆ†é…ä»»ä½•å†…å­˜ç©ºé—´ï¼Œå³åº•å±‚å…ƒç´ åŒ…å«0ä¸ªå…ƒç´ ã€‚</p>

<p>æœ€åéœ€è¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯ã€‚ä¸ç®¡æ˜¯ä½¿ç”¨ nil åˆ‡ç‰‡è¿˜æ˜¯ç©ºåˆ‡ç‰‡ï¼Œå¯¹å…¶è°ƒç”¨å†…ç½®å‡½æ•° appendï¼Œlen å’Œ cap çš„æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>

<h2 id="å››-åˆ‡ç‰‡æ‰©å®¹">å››. åˆ‡ç‰‡æ‰©å®¹</h2>

<p>å½“ä¸€ä¸ªåˆ‡ç‰‡çš„å®¹é‡æ»¡äº†ï¼Œå°±éœ€è¦æ‰©å®¹äº†ã€‚æ€ä¹ˆæ‰©ï¼Œç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</p>

<pre><code class="language-go">
func growslice(et *_type, old slice, cap int) slice {
	if raceenabled {
		callerpc := getcallerpc(unsafe.Pointer(&amp;et))
		racereadrangepc(old.array, uintptr(old.len*int(et.size)), callerpc, funcPC(growslice))
	}
	if msanenabled {
		msanread(old.array, uintptr(old.len*int(et.size)))
	}

	if et.size == 0 {
		// å¦‚æœæ–°è¦æ‰©å®¹çš„å®¹é‡æ¯”åŸæ¥çš„å®¹é‡è¿˜è¦å°ï¼Œè¿™ä»£è¡¨è¦ç¼©å®¹äº†ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥æŠ¥panicäº†ã€‚
		if cap &lt; old.cap {
			panic(errorString(&quot;growslice: cap out of range&quot;))
		}

		// å¦‚æœå½“å‰åˆ‡ç‰‡çš„å¤§å°ä¸º0ï¼Œè¿˜è°ƒç”¨äº†æ‰©å®¹æ–¹æ³•ï¼Œé‚£ä¹ˆå°±æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„å®¹é‡çš„åˆ‡ç‰‡è¿”å›ã€‚
		return slice{unsafe.Pointer(&amp;zerobase), old.len, cap}
	}

    // è¿™é‡Œå°±æ˜¯æ‰©å®¹çš„ç­–ç•¥
	newcap := old.cap
	doublecap := newcap + newcap
	if cap &gt; doublecap {
		newcap = cap
	} else {
		if old.len &lt; 1024 {
			newcap = doublecap
		} else {
			// Check 0 &lt; newcap to detect overflow
			// and prevent an infinite loop.
			for 0 &lt; newcap &amp;&amp; newcap &lt; cap {
				newcap += newcap / 4
			}
			// Set newcap to the requested cap when
			// the newcap calculation overflowed.
			if newcap &lt;= 0 {
				newcap = cap
			}
		}
	}

	// è®¡ç®—æ–°çš„åˆ‡ç‰‡çš„å®¹é‡ï¼Œé•¿åº¦ã€‚
	var lenmem, newlenmem, capmem uintptr
	const ptrSize = unsafe.Sizeof((*byte)(nil))
	switch et.size {
	case 1:
		lenmem = uintptr(old.len)
		newlenmem = uintptr(cap)
		capmem = roundupsize(uintptr(newcap))
		newcap = int(capmem)
	case ptrSize:
		lenmem = uintptr(old.len) * ptrSize
		newlenmem = uintptr(cap) * ptrSize
		capmem = roundupsize(uintptr(newcap) * ptrSize)
		newcap = int(capmem / ptrSize)
	default:
		lenmem = uintptr(old.len) * et.size
		newlenmem = uintptr(cap) * et.size
		capmem = roundupsize(uintptr(newcap) * et.size)
		newcap = int(capmem / et.size)
	}

	// åˆ¤æ–­éæ³•çš„å€¼ï¼Œä¿è¯å®¹é‡æ˜¯åœ¨å¢åŠ ï¼Œå¹¶ä¸”å®¹é‡ä¸è¶…è¿‡æœ€å¤§å®¹é‡
	if cap &lt; old.cap || uintptr(newcap) &gt; maxSliceCap(et.size) {
		panic(errorString(&quot;growslice: cap out of range&quot;))
	}

	var p unsafe.Pointer
	if et.kind&amp;kindNoPointers != 0 {
		// åœ¨è€çš„åˆ‡ç‰‡åé¢ç»§ç»­æ‰©å……å®¹é‡
		p = mallocgc(capmem, nil, false)
		// å°† lenmem è¿™ä¸ªå¤šä¸ª bytes ä» old.arrayåœ°å€ æ‹·è´åˆ° p çš„åœ°å€å¤„
		memmove(p, old.array, lenmem)
		// å…ˆå°† P åœ°å€åŠ ä¸Šæ–°çš„å®¹é‡å¾—åˆ°æ–°åˆ‡ç‰‡å®¹é‡çš„åœ°å€ï¼Œç„¶åå°†æ–°åˆ‡ç‰‡å®¹é‡åœ°å€åé¢çš„ capmem-newlenmem ä¸ª bytes è¿™å—å†…å­˜åˆå§‹åŒ–ã€‚ä¸ºä¹‹åç»§ç»­ append() æ“ä½œè…¾å‡ºç©ºé—´ã€‚
		memclrNoHeapPointers(add(p, newlenmem), capmem-newlenmem)
	} else {
		// é‡æ–°ç”³è¯·æ–°çš„æ•°ç»„ç»™æ–°åˆ‡ç‰‡
		// é‡æ–°ç”³è¯· capmen è¿™ä¸ªå¤§çš„å†…å­˜åœ°å€ï¼Œå¹¶ä¸”åˆå§‹åŒ–ä¸º0å€¼
		p = mallocgc(capmem, et, true)
		if !writeBarrier.enabled {
			// å¦‚æœè¿˜ä¸èƒ½æ‰“å¼€å†™é”ï¼Œé‚£ä¹ˆåªèƒ½æŠŠ lenmem å¤§å°çš„ bytes å­—èŠ‚ä» old.array æ‹·è´åˆ° p çš„åœ°å€å¤„
			memmove(p, old.array, lenmem)
		} else {
			// å¾ªç¯æ‹·è´è€çš„åˆ‡ç‰‡çš„å€¼
			for i := uintptr(0); i &lt; lenmem; i += et.size {
				typedmemmove(et, add(p, i), add(old.array, i))
			}
		}
	}
	// è¿”å›æœ€ç»ˆæ–°åˆ‡ç‰‡ï¼Œå®¹é‡æ›´æ–°ä¸ºæœ€æ–°æ‰©å®¹ä¹‹åçš„å®¹é‡
	return slice{p, old.len, newcap}
}

</code></pre>

<p>ä¸Šè¿°å°±æ˜¯æ‰©å®¹çš„å®ç°ã€‚ä¸»è¦éœ€è¦å…³æ³¨çš„æœ‰ä¸¤ç‚¹ï¼Œä¸€ä¸ªæ˜¯æ‰©å®¹æ—¶å€™çš„ç­–ç•¥ï¼Œè¿˜æœ‰ä¸€ä¸ªå°±æ˜¯æ‰©å®¹æ˜¯ç”Ÿæˆå…¨æ–°çš„å†…å­˜åœ°å€è¿˜æ˜¯åœ¨åŸæ¥çš„åœ°å€åè¿½åŠ ã€‚</p>

<h4 id="1-æ‰©å®¹ç­–ç•¥">1. æ‰©å®¹ç­–ç•¥</h4>

<p>å…ˆçœ‹çœ‹æ‰©å®¹ç­–ç•¥ã€‚</p>

<pre><code class="language-go">
func main() {
	slice := []int{10, 20, 30, 40}
	newSlice := append(slice, 50)
	fmt.Printf(&quot;Before slice = %v, Pointer = %p, len = %d, cap = %d\n&quot;, slice, &amp;slice, len(slice), cap(slice))
	fmt.Printf(&quot;Before newSlice = %v, Pointer = %p, len = %d, cap = %d\n&quot;, newSlice, &amp;newSlice, len(newSlice), cap(newSlice))
	newSlice[1] += 10
	fmt.Printf(&quot;After slice = %v, Pointer = %p, len = %d, cap = %d\n&quot;, slice, &amp;slice, len(slice), cap(slice))
	fmt.Printf(&quot;After newSlice = %v, Pointer = %p, len = %d, cap = %d\n&quot;, newSlice, &amp;newSlice, len(newSlice), cap(newSlice))
}

</code></pre>

<p>è¾“å‡ºç»“æœï¼š</p>

<pre><code class="language-go">
Before slice = [10 20 30 40], Pointer = 0xc4200b0140, len = 4, cap = 4
Before newSlice = [10 20 30 40 50], Pointer = 0xc4200b0180, len = 5, cap = 8
After slice = [10 20 30 40], Pointer = 0xc4200b0140, len = 4, cap = 4
After newSlice = [10 30 30 40 50], Pointer = 0xc4200b0180, len = 5, cap = 8

</code></pre>

<p>ç”¨å›¾è¡¨ç¤ºå‡ºä¸Šè¿°è¿‡ç¨‹ã€‚</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-4169615963b6e50a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>ä»å›¾ä¸Šæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„çœ‹å‡ºï¼Œæ–°çš„åˆ‡ç‰‡å’Œä¹‹å‰çš„åˆ‡ç‰‡å·²ç»ä¸åŒäº†ï¼Œå› ä¸ºæ–°çš„åˆ‡ç‰‡æ›´æ”¹äº†ä¸€ä¸ªå€¼ï¼Œå¹¶æ²¡æœ‰å½±å“åˆ°åŸæ¥çš„æ•°ç»„ï¼Œæ–°åˆ‡ç‰‡æŒ‡å‘çš„æ•°ç»„æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚å¹¶ä¸” cap å®¹é‡ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ã€‚è¿™ä¹‹é—´ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>

<p>Go ä¸­åˆ‡ç‰‡æ‰©å®¹çš„ç­–ç•¥æ˜¯è¿™æ ·çš„ï¼š</p>

<ul>
<li>é¦–å…ˆåˆ¤æ–­ï¼Œå¦‚æœæ–°ç”³è¯·å®¹é‡ï¼ˆcapï¼‰å¤§äº2å€çš„æ—§å®¹é‡ï¼ˆold.capï¼‰ï¼Œæœ€ç»ˆå®¹é‡ï¼ˆnewcapï¼‰å°±æ˜¯æ–°ç”³è¯·çš„å®¹é‡ï¼ˆcapï¼‰<br /></li>
<li>å¦åˆ™åˆ¤æ–­ï¼Œå¦‚æœæ—§åˆ‡ç‰‡çš„é•¿åº¦å°äº1024ï¼Œåˆ™æœ€ç»ˆå®¹é‡(newcap)å°±æ˜¯æ—§å®¹é‡(old.cap)çš„ä¸¤å€ï¼Œå³ï¼ˆnewcap=doublecapï¼‰<br /></li>
<li>å¦åˆ™åˆ¤æ–­ï¼Œå¦‚æœæ—§åˆ‡ç‰‡é•¿åº¦å¤§äºç­‰äº1024ï¼Œåˆ™æœ€ç»ˆå®¹é‡ï¼ˆnewcapï¼‰ä»æ—§å®¹é‡ï¼ˆold.capï¼‰å¼€å§‹å¾ªç¯å¢åŠ åŸæ¥çš„ 1/4ï¼Œå³ï¼ˆnewcap=old.cap,for {newcap += newcap/4}ï¼‰ç›´åˆ°æœ€ç»ˆå®¹é‡ï¼ˆnewcapï¼‰å¤§äºç­‰äºæ–°ç”³è¯·çš„å®¹é‡(cap)ï¼Œå³ï¼ˆnewcap &gt;= capï¼‰<br /></li>
<li>å¦‚æœæœ€ç»ˆå®¹é‡ï¼ˆcapï¼‰è®¡ç®—å€¼æº¢å‡ºï¼Œåˆ™æœ€ç»ˆå®¹é‡ï¼ˆcapï¼‰å°±æ˜¯æ–°ç”³è¯·å®¹é‡ï¼ˆcapï¼‰</li>
</ul>

<p><del>å¦‚æœåˆ‡ç‰‡çš„å®¹é‡å°äº 1024 ä¸ªå…ƒç´ ï¼Œäºæ˜¯æ‰©å®¹çš„æ—¶å€™å°±ç¿»å€å¢åŠ å®¹é‡ã€‚ä¸Šé¢é‚£ä¸ªä¾‹å­ä¹ŸéªŒè¯äº†è¿™ä¸€æƒ…å†µï¼Œæ€»å®¹é‡ä»åŸæ¥çš„4ä¸ªç¿»å€åˆ°ç°åœ¨çš„8ä¸ªã€‚</del></p>

<p><del>ä¸€æ—¦å…ƒç´ ä¸ªæ•°è¶…è¿‡ 1024 ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå¢é•¿å› å­å°±å˜æˆ 1.25 ï¼Œå³æ¯æ¬¡å¢åŠ åŸæ¥å®¹é‡çš„å››åˆ†ä¹‹ä¸€ã€‚</del></p>

<p><strong>æ³¨æ„ï¼šæ‰©å®¹æ‰©å¤§çš„å®¹é‡éƒ½æ˜¯é’ˆå¯¹åŸæ¥çš„å®¹é‡è€Œè¨€çš„ï¼Œè€Œä¸æ˜¯é’ˆå¯¹åŸæ¥æ•°ç»„çš„é•¿åº¦è€Œè¨€çš„ã€‚</strong></p>

<h4 id="2-æ–°æ•°ç»„-or-è€æ•°ç»„">2. æ–°æ•°ç»„ or è€æ•°ç»„ ï¼Ÿ</h4>

<p>å†è°ˆè°ˆæ‰©å®¹ä¹‹åçš„æ•°ç»„ä¸€å®šæ˜¯æ–°çš„ä¹ˆï¼Ÿè¿™ä¸ªä¸ä¸€å®šï¼Œåˆ†ä¸¤ç§æƒ…å†µã€‚</p>

<p>æƒ…å†µä¸€ï¼š</p>

<pre><code class="language-go">
func main() {
	array := [4]int{10, 20, 30, 40}
	slice := array[0:2]
	newSlice := append(slice, 50)
	fmt.Printf(&quot;Before slice = %v, Pointer = %p, len = %d, cap = %d\n&quot;, slice, &amp;slice, len(slice), cap(slice))
	fmt.Printf(&quot;Before newSlice = %v, Pointer = %p, len = %d, cap = %d\n&quot;, newSlice, &amp;newSlice, len(newSlice), cap(newSlice))
	newSlice[1] += 10
	fmt.Printf(&quot;After slice = %v, Pointer = %p, len = %d, cap = %d\n&quot;, slice, &amp;slice, len(slice), cap(slice))
	fmt.Printf(&quot;After newSlice = %v, Pointer = %p, len = %d, cap = %d\n&quot;, newSlice, &amp;newSlice, len(newSlice), cap(newSlice))
	fmt.Printf(&quot;After array = %v\n&quot;, array)
}

</code></pre>

<p>æ‰“å°è¾“å‡ºï¼š</p>

<pre><code class="language-go">
Before slice = [10 20], Pointer = 0xc4200c0040, len = 2, cap = 4
Before newSlice = [10 20 50], Pointer = 0xc4200c0060, len = 3, cap = 4
After slice = [10 30], Pointer = 0xc4200c0040, len = 2, cap = 4
After newSlice = [10 30 50], Pointer = 0xc4200c0060, len = 3, cap = 4
After array = [10 30 50 40]

</code></pre>

<p>æŠŠä¸Šè¿°è¿‡ç¨‹ç”¨å›¾è¡¨ç¤ºå‡ºæ¥ï¼Œå¦‚ä¸‹å›¾ã€‚</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-f6d4f66850cf88c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>é€šè¿‡æ‰“å°çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰©å®¹ä»¥åå¹¶æ²¡æœ‰æ–°å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ‰©å®¹å‰åçš„æ•°ç»„éƒ½æ˜¯åŒä¸€ä¸ªï¼Œè¿™ä¹Ÿå°±å¯¼è‡´äº†æ–°çš„åˆ‡ç‰‡ä¿®æ”¹äº†ä¸€ä¸ªå€¼ï¼Œä¹Ÿå½±å“åˆ°äº†è€çš„åˆ‡ç‰‡äº†ã€‚å¹¶ä¸” append() æ“ä½œä¹Ÿæ”¹å˜äº†åŸæ¥æ•°ç»„é‡Œé¢çš„å€¼ã€‚ä¸€ä¸ª append() æ“ä½œå½±å“äº†è¿™ä¹ˆå¤šåœ°æ–¹ï¼Œå¦‚æœåŸæ•°ç»„ä¸Šæœ‰å¤šä¸ªåˆ‡ç‰‡ï¼Œé‚£ä¹ˆè¿™äº›åˆ‡ç‰‡éƒ½ä¼šè¢«å½±å“ï¼æ— æ„é—´å°±äº§ç”Ÿäº†è«åçš„ bugï¼</p>

<p>è¿™ç§æƒ…å†µï¼Œç”±äºåŸæ•°ç»„è¿˜æœ‰å®¹é‡å¯ä»¥æ‰©å®¹ï¼Œæ‰€ä»¥æ‰§è¡Œ append() æ“ä½œä»¥åï¼Œä¼šåœ¨åŸæ•°ç»„ä¸Šç›´æ¥æ“ä½œï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰©å®¹ä»¥åçš„æ•°ç»„è¿˜æ˜¯æŒ‡å‘åŸæ¥çš„æ•°ç»„ã€‚</p>

<p>è¿™ç§æƒ…å†µä¹Ÿæå®¹æ˜“å‡ºç°åœ¨å­—é¢é‡åˆ›å»ºåˆ‡ç‰‡æ—¶å€™ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° cap ä¼ å€¼çš„æ—¶å€™ï¼Œå¦‚æœç”¨å­—é¢é‡åˆ›å»ºåˆ‡ç‰‡ï¼Œcap å¹¶ä¸ç­‰äºæŒ‡å‘æ•°ç»„çš„æ€»å®¹é‡ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µå°±ä¼šå‘ç”Ÿã€‚</p>

<pre><code class="language-go">
slice := array[1:2:3]

</code></pre>

<p><strong>ä¸Šé¢è¿™ç§æƒ…å†µéå¸¸å±é™©ï¼Œæåº¦å®¹æ˜“äº§ç”Ÿ bug ã€‚</strong></p>

<p>å»ºè®®ç”¨å­—é¢é‡åˆ›å»ºåˆ‡ç‰‡çš„æ—¶å€™ï¼Œcap çš„å€¼ä¸€å®šè¦ä¿æŒæ¸…é†’ï¼Œé¿å…å…±äº«åŸæ•°ç»„å¯¼è‡´çš„ bugã€‚</p>

<p>æƒ…å†µäºŒï¼š</p>

<p>æƒ…å†µäºŒå…¶å®å°±æ˜¯åœ¨æ‰©å®¹ç­–ç•¥é‡Œé¢ä¸¾çš„ä¾‹å­ï¼Œåœ¨é‚£ä¸ªä¾‹å­ä¸­ä¹‹æ‰€ä»¥ç”Ÿæˆäº†æ–°çš„åˆ‡ç‰‡ï¼Œæ˜¯å› ä¸ºåŸæ¥æ•°ç»„çš„å®¹é‡å·²ç»è¾¾åˆ°äº†æœ€å¤§å€¼ï¼Œå†æƒ³æ‰©å®¹ï¼Œ Go é»˜è®¤ä¼šå…ˆå¼€ä¸€ç‰‡å†…å­˜åŒºåŸŸï¼ŒæŠŠåŸæ¥çš„å€¼æ‹·è´è¿‡æ¥ï¼Œç„¶åå†æ‰§è¡Œ append() æ“ä½œã€‚è¿™ç§æƒ…å†µä¸æ¯«ä¸å½±å“åŸæ•°ç»„ã€‚</p>

<p>æ‰€ä»¥å»ºè®®å°½é‡é¿å…æƒ…å†µä¸€ï¼Œå°½é‡ä½¿ç”¨æƒ…å†µäºŒï¼Œé¿å… bug äº§ç”Ÿã€‚</p>

<h2 id="äº”-åˆ‡ç‰‡æ‹·è´">äº”. åˆ‡ç‰‡æ‹·è´</h2>

<p>Slice ä¸­æ‹·è´æ–¹æ³•æœ‰2ä¸ªã€‚</p>

<pre><code class="language-go">
func slicecopy(to, fm slice, width uintptr) int {
	// å¦‚æœæºåˆ‡ç‰‡æˆ–è€…ç›®æ ‡åˆ‡ç‰‡æœ‰ä¸€ä¸ªé•¿åº¦ä¸º0ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦æ‹·è´ï¼Œç›´æ¥ return 
	if fm.len == 0 || to.len == 0 {
		return 0
	}
	// n è®°å½•ä¸‹æºåˆ‡ç‰‡æˆ–è€…ç›®æ ‡åˆ‡ç‰‡è¾ƒçŸ­çš„é‚£ä¸€ä¸ªçš„é•¿åº¦
	n := fm.len
	if to.len &lt; n {
		n = to.len
	}
	// å¦‚æœå…¥å‚ width = 0ï¼Œä¹Ÿä¸éœ€è¦æ‹·è´äº†ï¼Œè¿”å›è¾ƒçŸ­çš„åˆ‡ç‰‡çš„é•¿åº¦
	if width == 0 {
		return n
	}
	// å¦‚æœå¼€å¯äº†ç«äº‰æ£€æµ‹
	if raceenabled {
		callerpc := getcallerpc(unsafe.Pointer(&amp;to))
		pc := funcPC(slicecopy)
		racewriterangepc(to.array, uintptr(n*int(width)), callerpc, pc)
		racereadrangepc(fm.array, uintptr(n*int(width)), callerpc, pc)
	}
	// å¦‚æœå¼€å¯äº† The memory sanitizer (msan)
	if msanenabled {
		msanwrite(to.array, uintptr(n*int(width)))
		msanread(fm.array, uintptr(n*int(width)))
	}

	size := uintptr(n) * width
	if size == 1 { 
		// TODO: is this still worth it with new memmove impl?
		// å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæŒ‡é’ˆç›´æ¥è½¬æ¢å³å¯
		*(*byte)(to.array) = *(*byte)(fm.array) // known to be a byte pointer
	} else {
		// å¦‚æœä¸æ­¢ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±æŠŠ size ä¸ª bytes ä» fm.array åœ°å€å¼€å§‹ï¼Œæ‹·è´åˆ° to.array åœ°å€ä¹‹å
		memmove(to.array, fm.array, size)
	}
	return n
}

</code></pre>

<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œslicecopy æ–¹æ³•ä¼šæŠŠæºåˆ‡ç‰‡å€¼(å³ fm Slice )ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°ç›®æ ‡åˆ‡ç‰‡(å³ to Slice )ä¸­ï¼Œå¹¶è¿”å›è¢«å¤åˆ¶çš„å…ƒç´ ä¸ªæ•°ï¼Œcopy çš„ä¸¤ä¸ªç±»å‹å¿…é¡»ä¸€è‡´ã€‚slicecopy æ–¹æ³•æœ€ç»ˆçš„å¤åˆ¶ç»“æœå–å†³äºè¾ƒçŸ­çš„é‚£ä¸ªåˆ‡ç‰‡ï¼Œå½“è¾ƒçŸ­çš„åˆ‡ç‰‡å¤åˆ¶å®Œæˆï¼Œæ•´ä¸ªå¤åˆ¶è¿‡ç¨‹å°±å…¨éƒ¨å®Œæˆäº†ã€‚</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-050f1ea8c98fd9ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼š</p>

<pre><code class="language-go">
func main() {
	array := []int{10, 20, 30, 40}
	slice := make([]int, 6)
	n := copy(slice, array)
	fmt.Println(n,slice)
}

</code></pre>

<p>è¿˜æœ‰ä¸€ä¸ªæ‹·è´çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åŸç†å’Œ slicecopy æ–¹æ³•ç±»ä¼¼ï¼Œä¸åœ¨èµ˜è¿°äº†ï¼Œæ³¨é‡Šå†™åœ¨ä»£ç é‡Œé¢äº†ã€‚</p>

<pre><code class="language-go">

func slicestringcopy(to []byte, fm string) int {
	// å¦‚æœæºåˆ‡ç‰‡æˆ–è€…ç›®æ ‡åˆ‡ç‰‡æœ‰ä¸€ä¸ªé•¿åº¦ä¸º0ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦æ‹·è´ï¼Œç›´æ¥ return 
	if len(fm) == 0 || len(to) == 0 {
		return 0
	}
	// n è®°å½•ä¸‹æºåˆ‡ç‰‡æˆ–è€…ç›®æ ‡åˆ‡ç‰‡è¾ƒçŸ­çš„é‚£ä¸€ä¸ªçš„é•¿åº¦
	n := len(fm)
	if len(to) &lt; n {
		n = len(to)
	}
	// å¦‚æœå¼€å¯äº†ç«äº‰æ£€æµ‹
	if raceenabled {
		callerpc := getcallerpc(unsafe.Pointer(&amp;to))
		pc := funcPC(slicestringcopy)
		racewriterangepc(unsafe.Pointer(&amp;to[0]), uintptr(n), callerpc, pc)
	}
	// å¦‚æœå¼€å¯äº† The memory sanitizer (msan)
	if msanenabled {
		msanwrite(unsafe.Pointer(&amp;to[0]), uintptr(n))
	}
	// æ‹·è´å­—ç¬¦ä¸²è‡³å­—èŠ‚æ•°ç»„
	memmove(unsafe.Pointer(&amp;to[0]), stringStructOf(&amp;fm).str, uintptr(n))
	return n
}


</code></pre>

<p>å†ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼š</p>

<pre><code class="language-go">
func main() {
	slice := make([]byte, 3)
	n := copy(slice, &quot;abcdef&quot;)
	fmt.Println(n,slice)
}

</code></pre>

<p>è¾“å‡ºï¼š</p>

<pre><code class="language-go">
3 [97,98,99]

</code></pre>

<p>è¯´åˆ°æ‹·è´ï¼Œåˆ‡ç‰‡ä¸­æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚</p>

<pre><code class="language-go">
func main() {
	slice := []int{10, 20, 30, 40}
	for index, value := range slice {
		fmt.Printf(&quot;value = %d , value-addr = %x , slice-addr = %x\n&quot;, value, &amp;value, &amp;slice[index])
	}
}

</code></pre>

<p>è¾“å‡ºï¼š</p>

<pre><code class="language-go">
value = 10 , value-addr = c4200aedf8 , slice-addr = c4200b0320
value = 20 , value-addr = c4200aedf8 , slice-addr = c4200b0328
value = 30 , value-addr = c4200aedf8 , slice-addr = c4200b0330
value = 40 , value-addr = c4200aedf8 , slice-addr = c4200b0338
</code></pre>

<p>ä»ä¸Šé¢ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœç”¨ range çš„æ–¹å¼å»éå†ä¸€ä¸ªåˆ‡ç‰‡ï¼Œæ‹¿åˆ°çš„ Value å…¶å®æ˜¯åˆ‡ç‰‡é‡Œé¢çš„å€¼æ‹·è´ã€‚æ‰€ä»¥æ¯æ¬¡æ‰“å° Value çš„åœ°å€éƒ½ä¸å˜ã€‚</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1194012-2c6325ccf25d5253.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" /></p>

<p>ç”±äº Value æ˜¯å€¼æ‹·è´çš„ï¼Œå¹¶éå¼•ç”¨ä¼ é€’ï¼Œæ‰€ä»¥ç›´æ¥æ”¹ Value æ˜¯è¾¾ä¸åˆ°æ›´æ”¹åŸåˆ‡ç‰‡å€¼çš„ç›®çš„çš„ï¼Œéœ€è¦é€šè¿‡ <code>&amp;slice[index]</code> è·å–çœŸå®çš„åœ°å€ã€‚</p>

<h1 id="see-also">See Also</h1>

<blockquote>
<p>Thanks to the authors ğŸ™‚</p>
</blockquote>

<ul>
<li><a href="https://golang.org/src/runtime/slice.go">Source file src/runtime/slice.go</a></li>
<li><a href="https://jiajunhuang.com/articles/2017_07_18-golang_slice.md.html">Golang slice æºç é˜…è¯»</a></li>
<li><a href="https://halfrost.com/go_slice/">æ·±å…¥è§£æ Go ä¸­ Slice åº•å±‚å®ç°</a></li>
<li><a href="https://github.com/qyuhen/book">ã€ŠGo å­¦ä¹ ç¬”è®° ç¬¬å…­ç‰ˆã€‹ æºç </a>
<br /></li>
</ul>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">zher</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2018-11-29</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/golang/">golang</a>
          </div>
      <nav class="post-nav">
        
        <a class="next" href="/post/tech/code/golang/20181117-slice-deep-learning/">
            <span class="next-text nav-default">Golang | Slice Deep Learning</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '2018-11-21 14:06:08 \x2b0800 CST',
        title: '[è½¬] Golang | Slice æ·±å…¥ç†è§£',
        clientID: '4357c1dbcf7ef0515c29',
        clientSecret: '1ad00adfd9544bff956529daf898d4b81fed2a9d',
        repo: 'blog-comments',
        owner: 'zhezh09',
        admin: ['zhezh09'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:zhezh.boy@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/zher16297365" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.facebook.com/zhe.zh.54" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://plus.google.com/u/0/103084907763171979239" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/zhezh09" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/p/1005053510554731/home?from=page_100505&amp;mod=TAB&amp;is_all=1#place" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/boy-zhe/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.instagram.com/zher09/" class="iconfont icon-instagram" title="instagram"></a>
  <a href="https://zhezh09.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">zher</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/dist/even.ece58db6.min.js"></script>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123995495-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>

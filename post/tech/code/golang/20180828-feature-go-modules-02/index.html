<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®° - Zher&#39;s Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="zher" /><meta name="description" content="Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°" />
<meta name="keywords" content="golang, module" />







<meta name="generator" content="Hugo 0.46" />


<link rel="canonical" href="https://zhezh09.github.io/post/tech/code/golang/20180828-feature-go-modules-02/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<script src="https://cdn.jsdelivr.net/npm/eruda@1.2.6/eruda.min.js" integrity="sha256-Jmz4bc3kp+rRrXX2tGadNBKFLwtzMapr8kHABxSAAP8=" crossorigin="anonymous"></script>
<script>eruda.init();</script>


<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°" />
<meta property="og:description" content="Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zhezh09.github.io/post/tech/code/golang/20180828-feature-go-modules-02/" />



<meta property="article:published_time" content="2018-08-29T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2018-08-29T00:00:00&#43;00:00"/>











<meta itemprop="name" content="Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°">
<meta itemprop="description" content="Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°">


<meta itemprop="datePublished" content="2018-08-29T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-08-29T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1944">



<meta itemprop="keywords" content="code,golang," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°"/>
<meta name="twitter:description" content="Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Zher&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/categories/footprint/">
        <li class="mobile-menu-item">FootPrint</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Zher&#39;s Blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/footprint/">FootPrint</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-08-29 </span>
        <div class="post-category">
            
              <a href="/categories/tech/"> tech </a>
            
          </div>
        <span class="more-meta"> 1944 words </span>
        <span class="more-meta"> 4 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li><a href="#1-go-module-åˆå§‹åŒ–">1. Go Module åˆå§‹åŒ–</a>
<ul>
<li><a href="#1-1-æ–°å»ºé¡¹ç›®">1.1. æ–°å»ºé¡¹ç›®</a>
<ul>
<li><a href="#1-1-1-åˆ›å»ºæˆ‘ä»¬çš„æµ‹è¯•é¡¹ç›®-demo">1.1.1. åˆ›å»ºæˆ‘ä»¬çš„æµ‹è¯•é¡¹ç›®ï¼šdemo</a></li>
<li><a href="#1-1-2-åˆ›å»ºç”¨äºæµ‹è¯•çš„-go-æºç æ–‡ä»¶-main-go">1.1.2. åˆ›å»ºç”¨äºæµ‹è¯•çš„ Go æºç æ–‡ä»¶ï¼šmain.go</a></li>
<li><a href="#1-1-3-æ„å»ºæ¨¡å—">1.1.3. æ„å»ºæ¨¡å—</a>
<ul>
<li><a href="#1-1-3-1-mod-é€‰é¡¹">1.1.3.1. -mod é€‰é¡¹</a></li>
</ul></li>
<li><a href="#1-1-4-åŒ…ç®¡ç†">1.1.4. åŒ…ç®¡ç†</a>
<ul>
<li><a href="#1-1-4-1-æ‰‹åŠ¨å¤„ç†ä¾èµ–">1.1.4.1. æ‰‹åŠ¨å¤„ç†ä¾èµ–</a></li>
<li><a href="#1-1-4-2-go-get-å‡çº§">1.1.4.2. go get å‡çº§</a></li>
</ul></li>
</ul></li>
<li><a href="#1-2-å·²å­˜åœ¨é¡¹ç›®">1.2. å·²å­˜åœ¨é¡¹ç›®</a></li>
</ul></li>
<li><a href="#2-see-also">2. See Also</a></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      <!-- æ‘˜è¦ -->

<p>Go1.11 æ–°ç‰¹æ€§ â€” ä¾èµ–ç®¡ç†å·¥å…·ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°ï¼Œå†…å®¹åŒ…æ‹¬:</p>

<ul>
<li>å¦‚ä½•åœ¨ <code>æ–°</code> çš„é¡¹ç›®ä¸Šä½¿ç”¨ go modules</li>
<li>å¦‚ä½•åœ¨ <code>æ—§</code> çš„é¡¹ç›®ä¸­å¼•å…¥ go modules</li>
</ul>

<p></p>

<blockquote>
<p>Statement: æ–‡ä¸­éƒ¨åˆ†å†…å®¹å‚è€ƒè‡ªç½‘ç»œåšå®¢(åœ°å€åœ¨æ–‡æœ«)ï¼Œå¹¶ç»“åˆè‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹ç¨åŠ æ•´ç†å’Œæ€»ç»“ï¼Œæ¬¢è¿å¹¿å¤§ Gophers äº¤æµæŒ‡æ­£ ğŸ™‚</p>
</blockquote>

<p>åœ¨ <a href="https://zhezh09.github.io/post/tech/code/golang/20180828-feature-go-modules-01/">ä¸Šä¸€ç¯‡</a> æ–‡ç« ä¸­å¯¹ Go Module ç›¸å…³æ¦‚å¿µåšäº†ç®€å•å­¦ä¹ å’Œäº†è§£ï¼Œæ¥ä¸‹æ¥å­¦ä¹ ä¸€ä¸‹ Go Module çš„å…·ä½“ä½¿ç”¨æ–¹å¼å§, So, Go.</p>

<p>å®è·µç¯å¢ƒï¼šgo version go1.11 windows/amd64</p>

<h1 id="1-go-module-åˆå§‹åŒ–">1. Go Module åˆå§‹åŒ–</h1>

<blockquote>
<p>Note: Go Module å’Œä¼ ç»Ÿçš„ GOPATH ä¸åŒï¼Œä¸éœ€è¦åŒ…å«ä¾‹å¦‚ï¼šsrcã€bin è¿™æ ·çš„å­ç›®å½•ï¼Œä¸€ä¸ªæºä»£ç ç›®å½•ç”šè‡³æ˜¯ç©ºç›®å½•éƒ½å¯ä»¥ä½œä¸º <code>module</code>ï¼Œåªè¦å…¶ä¸­åŒ…å« go.mod æ–‡ä»¶å³å¯ã€‚</p>
</blockquote>

<p>Next, æˆ‘ä»¬å…ˆç”¨ä¸€ä¸ªç©ºç›®å½•(GOPATHä¹‹å¤–)æ¥åˆ›å»ºç¬¬ä¸€ä¸ªåŒ…å« Go Module çš„é¡¹ç›®å§ï¼</p>

<h2 id="1-1-æ–°å»ºé¡¹ç›®">1.1. æ–°å»ºé¡¹ç›®</h2>

<p>è¦åˆå§‹åŒ– module, éœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:</p>

<pre><code class="language-bash">$ go mod init [module]
</code></pre>

<h3 id="1-1-1-åˆ›å»ºæˆ‘ä»¬çš„æµ‹è¯•é¡¹ç›®-demo">1.1.1. åˆ›å»ºæˆ‘ä»¬çš„æµ‹è¯•é¡¹ç›®ï¼šdemo</h3>

<pre><code class="language-bash"># é¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹ï¼Œå½“å‰ç›®å½•æ˜¯åœ¨ GOPATH ä¹‹å¤–
$ echo $GOPATH
D:\code\Go_Path

$ pwd
/d/code/Temp_Code/src/demo.go.modules

# åˆå§‹åŒ– Module
$ go mod init demo

$ ls
go.mod

# Note: å‘½ä»¤æ‰§è¡Œå®Œæˆåä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª go.mod æ–‡ä»¶ï¼Œé‡Œé¢åªæœ‰ä¸€è¡Œå†…å®¹ `module demo`
</code></pre>

<h3 id="1-1-2-åˆ›å»ºç”¨äºæµ‹è¯•çš„-go-æºç æ–‡ä»¶-main-go">1.1.2. åˆ›å»ºç”¨äºæµ‹è¯•çš„ Go æºç æ–‡ä»¶ï¼šmain.go</h3>

<pre><code class="language-go">// å¯ä»¥çœ‹åˆ°è¯¥æ–‡ä»¶åªåŒ…å«äº†ä¸€ä¸ªä¾èµ–åŒ…ï¼š&quot;github.com/sirupsen/logrus&quot;

package main

import (
    &quot;sync&quot;

    &quot;github.com/sirupsen/logrus&quot;
)

type Cache struct {
    sync.Map
}

func main() {
    cache := Cache{Map:sync.Map{}}

    cache.Store(&quot;i&quot;, &quot;1&quot;)
    cache.Store(&quot;j&quot;, &quot;2&quot;)
    cache.Store(&quot;k&quot;, &quot;3&quot;)

    cache.Range(func(key, value interface{}) bool {
    	logrus.Infoln(key, value)
    	return true
    })
}
</code></pre>

<h3 id="1-1-3-æ„å»ºæ¨¡å—">1.1.3. æ„å»ºæ¨¡å—</h3>

<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>go build</code>ã€<code>go test</code> ä»¥åŠ <code>go list</code> æ—¶ï¼ŒGo ä¼šè‡ªåŠ¨æ›´æ–° go.mod æ–‡ä»¶ï¼Œå¹¶ä¸”å°†ä¾èµ–å…³ç³»å†™å…¥å…¶ä¸­ã€‚</p>

<pre><code class="language-bash">$ go build ./...
go: finding github.com/sirupsen/logrus v1.0.6
go: finding golang.org/x/crypto v0.0.0-20180820150726-614d502a4dac
go: finding golang.org/x/sys v0.0.0-20180828065106-d99a578cf41b
go: downloading github.com/sirupsen/logrus v1.0.6
go: downloading golang.org/x/crypto v0.0.0-20180820150726-614d502a4dac
go: downloading golang.org/x/sys v0.0.0-20180828065106-d99a578cf41b
</code></pre>

<p>å¯ä»¥çœ‹åˆ° go è‡ªåŠ¨æŸ¥æ‰¾äº†ä¾èµ–å¹¶å®Œæˆä¸‹è½½ï¼Œä½†æ˜¯ä¸‹è½½çš„ä¾èµ–åŒ…å¹¶ä¸æ˜¯ä¸‹è½½åˆ°äº† <code>$GOPATH</code> ä¸­ï¼Œè€Œæ˜¯åœ¨ <code>$GOPATH/pkg/mod</code> ç›®å½•ä¸‹ï¼Œä¸”å¤šä¸ªé¡¹ç›®å¯ä»¥å…±äº«ç¼“å­˜çš„ module</p>

<p>ç„¶åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å½“å‰ç›®å½•å‘ç”Ÿäº†ä»€ä¹ˆ</p>

<pre><code class="language-bash">$ ls
demo.exe  go.mod  go.sum  main.go

# demo.exe ä¸ç”¨å¤šè¯´ï¼Œæ˜¯ç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶

# åœ¨æ¥çœ‹çœ‹ go.mod é‡Œé¢çš„å˜åŒ–
$ cat go.mod
module demo

require (
        github.com/sirupsen/logrus v1.0.6
        golang.org/x/crypto v0.0.0-20180820150726-614d502a4dac // indirect
        golang.org/x/sys v0.0.0-20180828065106-d99a578cf41b // indirect
)
# Note: go.mod ä¸­è®°å½•äº†æˆ‘ä»¬é¡¹ç›®çš„ç›´æ¥æˆ–é—´æ¥å¼•ç”¨çš„åŒ…

# å¦å¤–ï¼Œå¤šäº†ä¸€ä¸ª go.sum æ–‡ä»¶ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹é‡Œé¢æ˜¯ä»€ä¹ˆå†…å®¹
$ cat go.sum
github.com/sirupsen/logrus v1.0.6 h1:hcP1GmhGigz/O7h1WVUM5KklBp1JoNS9FggWKdj/j3s=
github.com/sirupsen/logrus v1.0.6/go.mod h1:pMByvHTf9Beacp5x1UXfOR9xyW/9antXMhjMPG0dEzc=
golang.org/x/crypto v0.0.0-20180820150726-614d502a4dac h1:7d7lG9fHOLdL6jZPtnV4LpI41SbohIJ1Atq7U991dMg=
golang.org/x/crypto v0.0.0-20180820150726-614d502a4dac/go.mod h1:6SG95UA2DQfeDnfUPMdvaQW0Q7yPrPDi9nlGo2tz2b4=
golang.org/x/sys v0.0.0-20180828065106-d99a578cf41b h1:cmOZLU2i7CLArKNViO+ZCQ47wqYFyKEIpbGWp+b6Uoc=
golang.org/x/sys v0.0.0-20180828065106-d99a578cf41b/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=

# Note: åœ¨ go.sum æ˜¯æˆ‘ä»¬ç›´æ¥å¼•ç”¨çš„ package å’Œå®ƒè‡ªèº«éœ€è¦çš„ä¾èµ–çš„ç‰ˆæœ¬è®°å½•ï¼Œgo module å°±æ˜¯æ ¹æ®è¿™äº›å»æ‰¾å¯¹åº”çš„ package çš„ã€‚
</code></pre>

<p>é¡ºå¸¦ä¸€æï¼Œå¦‚æœæˆ‘ä»¬ä¸åšä»»ä½•ä¿®æ”¹ï¼Œé»˜è®¤ä¼šä½¿ç”¨æœ€æ–°çš„åŒ…ç‰ˆæœ¬ï¼Œå¦‚æœåŒ…æ‰“è¿‡tagï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨æœ€æ–°çš„é‚£ä¸ªtagå¯¹åº”çš„ç‰ˆæœ¬ã€‚</p>

<p>ç°åœ¨æ¥è¯´è¯´å¦‚ä½•å®šä¹‰ä¸€ä¸ªmodulesï¼Œmodules æ˜¯ç”±Goæºæ–‡ä»¶ç›®å½•ç»“æ„å®šä¹‰çš„ï¼Œå¦‚æœç›®å½•ä¸‹å«æœ‰ <code>go.mod</code> æ–‡ä»¶ï¼Œè¯¥ç›®å½•ç§°ä¸ºæ¨¡å—æ ¹ç›®å½• <code>ï¼ˆmodule rootï¼‰</code>ã€‚æ¨¡å—æ ¹ç›®å½•åŠå…¶å­ç›®å½•æ‰€æœ‰çš„ Go åŒ…éƒ½æ˜¯å±äºè¯¥ modules çš„ï¼Œä½†æ˜¯å¦‚æœå­ç›®å½•åŒ…å«æœ‰äº†è‡ªå·±çš„ <code>go.mod</code> æ–‡ä»¶ï¼Œå°±ä¸å†éš¶å±äºçˆ¶ module ä¸‹ï¼Œ è€Œæ˜¯æœ‰äº†è‡ªå·±çš„ moduleã€‚ ä¸¾ä¸€ä¸ªä¾‹å­ï¼š<a href="https://my.oschina.net/u/553243/blog/1934149">(è¿™éƒ¨åˆ†å†…å®¹å‚è€ƒé“¾æ¥)</a></p>

<pre><code class="language-bash">qiang@DESKTOP-2A835P9 MINGW64 /d/code/gopath/src/gitlab.luojilab.com/zeroteam/ddkafka (module)
$ tree
.
|-- README.md
|-- go.mod
|-- go.sum
|-- models.go
|-- mq_interface.go
|-- sarama
|   |-- sarama_consumer.go
|   |-- sarama_consumer_test.go
|   |-- sarama_producer.go
|   `-- sarama_producter_test.go
`-- segmentio
    |-- segmention_Consumer.go
    |-- segmention_consumer_test.go
    |-- segmention_producer.go
    `-- segmention_producter_test.go
</code></pre>

<blockquote>
<p>gitlab.luojilab.com/zeroteam/ddkafka ç›®å½•ä¸‹å«æœ‰äº†go.modæ–‡ä»¶ï¼Œ æ‰€ä»¥å…¶å­ç›®å½• sarama å’Œsegmentio éƒ½å±äº gitlab.luojilab.com/zeroteam/ddkafka æ¨¡å—ï¼Œä½†æ˜¯å¦‚æœåœ¨ segmentio ç›®å½•ä¸­åŠ å…¥äº†<code>go.mod</code>ï¼Œé‚£ä¹ˆ segmentio å°±ä¸å†éš¶å±äº gitlab.luojilab.com/zeroteam/ddkafka æ¨¡å—äº†ã€‚</p>
</blockquote>

<h4 id="1-1-3-1-mod-é€‰é¡¹">1.1.3.1. -mod é€‰é¡¹</h4>

<p>æ­¤å¤–ï¼Œ<code>go build</code> å‘½ä»¤æ–°å¢åŠ äº†ä¸€ä¸ªç¼–è¯‘é€‰é¡¹: <code>-mod</code>ï¼š</p>

<pre><code class="language-bash">usage: go build [-o output] [-i] [build flags] [packages]

        -mod mode
            module download mode to use: readonly, release, or vendor.
            See 'go help modules' for more.
</code></pre>

<pre><code class="language-bash">$ go build -mod=readonly
</code></pre>

<p>åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œä»»ä½•ä¼šå¯¼è‡´ä¾èµ–å…³ç³»å˜åŠ¨çš„æƒ…å†µéƒ½å°†å¯¼è‡´ build å¤±è´¥ï¼Œå‰é¢æåˆ° build èƒ½è‡ªåŠ¨æŸ¥æ‰¾å¹¶æ›´æ–°ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨è¿™ä¸ªé€‰é¡¹å¯ä»¥æµ‹è¯• go.mod ä¸­çš„ä¾èµ–æ˜¯å¦æ•´æ´ï¼Œé˜²æ­¢éšå¼ä¿®æ”¹ <code>go.mod</code>ï¼Œä½†å¦‚æœæ˜ç¡®è°ƒç”¨äº† go modã€go get å‘½ä»¤åˆ™ä¾ç„¶ä¼šå¯¼è‡´ go.mod æ–‡ä»¶è¢«ä¿®æ”¹ã€‚</p>

<h3 id="1-1-4-åŒ…ç®¡ç†">1.1.4. åŒ…ç®¡ç†</h3>

<h4 id="1-1-4-1-æ‰‹åŠ¨å¤„ç†ä¾èµ–">1.1.4.1. æ‰‹åŠ¨å¤„ç†ä¾èµ–</h4>

<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>go mod tidy</code> æ‰‹åŠ¨å¤„ç†ä¾èµ–å…³ç³»ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p>

<pre><code class="language-bash">usage: go mod tidy [-v]

Tidy makes sure go.mod matches the source code in the module.
It adds any missing modules necessary to build the current module's
packages and dependencies, and it removes unused modules that
don't provide any relevant packages. It also adds any missing entries
to go.sum and removes any unnecessary ones.

The -v flag causes tidy to print information about removed modules
to standard error.
</code></pre>

<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>

<pre><code class="language-bash">$ go mod tidy
</code></pre>

<p>è¿™æ¡å‘½ä»¤ä¼šè‡ªåŠ¨æ·»åŠ ä¸¢å¤±çš„æˆ–ç§»é™¤ä¸å†ä½¿ç”¨çš„ modules</p>

<h4 id="1-1-4-2-go-get-å‡çº§">1.1.4.2. go get å‡çº§</h4>

<ul>
<li><p>è¿è¡Œ go get -u å°†ä¼šå‡çº§åˆ°æœ€æ–°çš„æ¬¡è¦ç‰ˆæœ¬æˆ–è€…ä¿®è®¢ç‰ˆæœ¬(x.y.z, zæ˜¯ä¿®è®¢ç‰ˆæœ¬å·ï¼Œ yæ˜¯æ¬¡è¦ç‰ˆæœ¬å·)</p></li>

<li><p>è¿è¡Œ go get -u=patch å°†ä¼šå‡çº§åˆ°æœ€æ–°çš„ä¿®è®¢ç‰ˆæœ¬</p></li>

<li><p>è¿è¡Œ go get package@version å°†ä¼šå‡çº§åˆ°æŒ‡å®šçš„ç‰ˆæœ¬å·version</p></li>
</ul>

<p>è¿è¡Œgo getå¦‚æœæœ‰ç‰ˆæœ¬çš„æ›´æ”¹ï¼Œé‚£ä¹ˆgo.modæ–‡ä»¶ä¹Ÿä¼šæ›´æ”¹</p>

<h2 id="1-2-å·²å­˜åœ¨é¡¹ç›®">1.2. å·²å­˜åœ¨é¡¹ç›®</h2>

<p>å‡è®¾ä½ å·²ç»æœ‰äº†ä¸€ä¸ª go é¡¹ç›®ï¼Œ æ¯”å¦‚åœ¨ <code>$GOPATH/github.com/smallnest/rpcx</code> ä¸‹ï¼Œ ä½ å¯ä»¥ä½¿ç”¨ go mod init github.com/smallnest/rpcx åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªç©ºçš„ go.mod (åªæœ‰ç¬¬ä¸€è¡Œ module github.com/smallnest/rpcx)ã€‚</p>

<p>ç„¶åä½ å¯ä»¥é€šè¿‡ go get -m ./&hellip;è®©å®ƒæŸ¥æ‰¾ä¾èµ–ï¼Œå¹¶è®°å½•åœ¨go.modæ–‡ä»¶ä¸­(ä½ è¿˜å¯ä»¥æŒ‡å®š -tags,è¿™æ ·å¯ä»¥æŠŠtagsçš„ä¾èµ–éƒ½æŸ¥æ‰¾åˆ°)ã€‚</p>

<p>é€šè¿‡ go mod tidy ä¹Ÿå¯ä»¥ç”¨æ¥ä¸º go.mod å¢åŠ ä¸¢å¤±çš„ä¾èµ–ï¼Œåˆ é™¤ä¸éœ€è¦çš„ä¾èµ–ï¼Œä½†æ˜¯æˆ‘ä¸ç¡®å®šå®ƒæ€ä¹ˆå¤„ç†tagsã€‚</p>

<p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¼šæŠŠ go.mod çš„ latest ç‰ˆæœ¬æ¢æˆå®é™…çš„æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¼šç”Ÿæˆä¸€ä¸ª go.sum è®°å½•æ¯ä¸ªä¾èµ–åº“çš„ç‰ˆæœ¬å’Œå“ˆå¸Œå€¼ã€‚</p>

<p><a href="https://colobu.com/2018/08/27/learn-go-module/#more">è¿™éƒ¨åˆ†å†…å®¹å‚è€ƒé“¾æ¥</a></p>

<blockquote>
<p>Note: åœ¨ Go1.11 ç‰ˆæœ¬ä¸‹ï¼ŒGOPATH ç›®å½•ä¸­çš„é¡¹ç›®é»˜è®¤æ˜¯ç¦ç”¨ Go Module çš„ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯</p>
</blockquote>

<h1 id="2-see-also">2. See Also</h1>

<blockquote>
<p>Thanks to the authors ğŸ™‚</p>
</blockquote>

<ul>
<li><a href="https://github.com/golang/go/wiki/Modules">Go å®˜ç½‘ï¼šWiki Modules</a></li>
<li><a href="https://tonybai.com/2018/07/15/hello-go-module/">åˆçª¥Go module: åŒ…æ‹¬äº†Go Moduleçš„ç”±æ¥ï¼Œä¼ ç»Ÿ Go ä¾èµ–ç®¡ç†çš„æ–¹å¼ä»¥åŠè¯¦ç»†çš„å®éªŒè¿‡ç¨‹</a></li>
<li><a href="https://www.cnblogs.com/apocelipes/p/9534885.html">golangåŒ…ç®¡ç†è§£å†³ä¹‹é“â€”â€”go modulesåˆæ¢</a></li>
<li><a href="https://colobu.com/2018/08/27/learn-go-module/#more">è·³å‡ºGo moduleçš„æ³¥æ½­</a></li>
<li><a href="https://my.oschina.net/u/553243/blog/1934149">Golang modules åˆæ¢</a></li>
</ul>
    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">zher</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">2018-08-29</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/code/">code</a>
          
          <a href="/tags/golang/">golang</a>
          
        </div>

      
      <nav class="post-nav">
        
        
          <a class="next" href="/post/tech/code/golang/20180828-feature-go-modules-01/">
            <span class="next-text nav-default">Golang: ä¾èµ–ç®¡ç†å·¥å…·-01ï¼šGo Modules åˆæ­¥äº†è§£å’Œå­¦ä¹ </span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  <div id="gitalk-container"></div>
  <link rel="stylesheet" href="/lib/gitalk/gitalk-1.2.2.min.css">
    <script src="/lib/gitalk/gitalk-1.2.2.min.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    id: '2018-08-29 00:00:00 \x2b0000 UTC',
    title: 'Golang: ä¾èµ–ç®¡ç†å·¥å…·-02ï¼šGo Modules ä½¿ç”¨è¿‡ç¨‹å­¦ä¹ ç¬”è®°',
    clientID: '4357c1dbcf7ef0515c29',
    clientSecret: '1ad00adfd9544bff956529daf898d4b81fed2a9d',
    repo: 'blog-comments',
    owner: 'zhezh09',
    admin: ['zhezh09'],
    body: decodeURI(location.href)
  });
  gitalk.render('gitalk-container');
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:zhezh.boy@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://www.facebook.com/zhe.zh.54" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://plus.google.com/u/0/103084907763171979239" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/zhezh09" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/p/1005053510554731/home?from=page_100505&amp;mod=TAB&amp;is_all=1#place" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/boy-zhe/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.instagram.com/zher09/" class="iconfont icon-instagram" title="instagram"></a>
  <a href="https://zhezh09.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">zher</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123995495-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Caddy | å­¦ä¹ ç¬”è®° - ijayer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="zher" /><meta name="description" content="å®‰è£… Linux Note: You must specify a personal or commercial license; see getcaddy.com for instructions. (å®‰è£…æ—¶è¦æ±‚å¿…é¡»ç»™å‡ºä¸€ç§è®¸å¯è¯ï¼Œæ‰€ä»¥ä¸‹é¢å‘½ä»¤æ·»åŠ äº†é€‰é¡¹ï¼š-s personal) 1 2 3 4 5 # ä¸€é”®å®‰è£…è„šæœ¬ [zhe@zhe Temp]$ curl https://getcaddy.com | bash -s personal # æŸ¥çœ‹" /><meta name="keywords" content="web" />






<meta name="generator" content="Hugo 0.55.6 with theme even" />


<link rel="canonical" href="https://ijayer.github.io/post/tech/web/20170419-caddy-learning-notes/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Caddy | å­¦ä¹ ç¬”è®°" />
<meta property="og:description" content="å®‰è£… Linux Note: You must specify a personal or commercial license; see getcaddy.com for instructions. (å®‰è£…æ—¶è¦æ±‚å¿…é¡»ç»™å‡ºä¸€ç§è®¸å¯è¯ï¼Œæ‰€ä»¥ä¸‹é¢å‘½ä»¤æ·»åŠ äº†é€‰é¡¹ï¼š-s personal) 1 2 3 4 5 # ä¸€é”®å®‰è£…è„šæœ¬ [zhe@zhe Temp]$ curl https://getcaddy.com | bash -s personal # æŸ¥çœ‹" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ijayer.github.io/post/tech/web/20170419-caddy-learning-notes/" />
<meta property="article:published_time" content="2017-04-19T17:53:01&#43;08:00"/>
<meta property="article:modified_time" content="2018-04-24T19:53:01&#43;00:00"/>

<meta itemprop="name" content="Caddy | å­¦ä¹ ç¬”è®°">
<meta itemprop="description" content="å®‰è£… Linux Note: You must specify a personal or commercial license; see getcaddy.com for instructions. (å®‰è£…æ—¶è¦æ±‚å¿…é¡»ç»™å‡ºä¸€ç§è®¸å¯è¯ï¼Œæ‰€ä»¥ä¸‹é¢å‘½ä»¤æ·»åŠ äº†é€‰é¡¹ï¼š-s personal) 1 2 3 4 5 # ä¸€é”®å®‰è£…è„šæœ¬ [zhe@zhe Temp]$ curl https://getcaddy.com | bash -s personal # æŸ¥çœ‹">


<meta itemprop="datePublished" content="2017-04-19T17:53:01&#43;08:00" />
<meta itemprop="dateModified" content="2018-04-24T19:53:01&#43;00:00" />
<meta itemprop="wordCount" content="3387">



<meta itemprop="keywords" content="web,caddy," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Caddy | å­¦ä¹ ç¬”è®°"/>
<meta name="twitter:description" content="å®‰è£… Linux Note: You must specify a personal or commercial license; see getcaddy.com for instructions. (å®‰è£…æ—¶è¦æ±‚å¿…é¡»ç»™å‡ºä¸€ç§è®¸å¯è¯ï¼Œæ‰€ä»¥ä¸‹é¢å‘½ä»¤æ·»åŠ äº†é€‰é¡¹ï¼š-s personal) 1 2 3 4 5 # ä¸€é”®å®‰è£…è„šæœ¬ [zhe@zhe Temp]$ curl https://getcaddy.com | bash -s personal # æŸ¥çœ‹"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">ijayer</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/categories/footprint/">
        <li class="mobile-menu-item">FootPrint</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">ijayer</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/footprint/">FootPrint</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Caddy | å­¦ä¹ ç¬”è®°</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-04-19 </span>
        <div class="post-category">
            <a href="/categories/tech/"> tech </a>
            </div>
          <span class="more-meta"> 3387 words </span>
          <span class="more-meta"> 7 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li><a href="#å®‰è£…">å®‰è£…</a>
<ul>
<li><a href="#linux">Linux</a></li>
<li><a href="#windows">Windows</a></li>
<li><a href="#source-code">Source code</a></li>
</ul></li>
<li><a href="#è¿è¡Œ">è¿è¡Œ</a></li>
<li><a href="#åº”ç”¨-é…ç½®caddy">åº”ç”¨(é…ç½®Caddy)</a>
<ul>
<li><a href="#é™æ€æ–‡ä»¶-server">é™æ€æ–‡ä»¶ Server</a></li>
<li><a href="#å•ä¸€ç«™ç‚¹">å•ä¸€ç«™ç‚¹</a></li>
<li><a href="#å¤šç«™ç‚¹éƒ¨ç½²">å¤šç«™ç‚¹éƒ¨ç½²</a></li>
<li><a href="#åå‘ä»£ç†">åå‘ä»£ç†</a>
<ul>
<li><a href="#æœåŠ¡å™¨ip-åå‘ä»£ç†">æœåŠ¡å™¨IP åå‘ä»£ç†</a></li>
<li><a href="#åŸŸå-åå‘ä»£ç†-http">åŸŸå åå‘ä»£ç† HTTP</a></li>
<li><a href="#åŸŸå-åå‘ä»£ç†-https">åŸŸå åå‘ä»£ç† HTTPS</a></li>
<li><a href="#http-é‡å®šå‘ä¸º-https">HTTP é‡å®šå‘ä¸º HTTPS</a></li>
</ul></li>
<li><a href="#è´Ÿè½½å‡è¡¡">è´Ÿè½½å‡è¡¡</a></li>
<li><a href="#websocket">Websocket</a></li>
<li><a href="#https">HTTPS</a>
<ul>
<li><a href="#è‡ªåŠ©ç”³è¯·letsencryptè¯ä¹¦">è‡ªåŠ©ç”³è¯·letsencryptè¯ä¹¦</a></li>
<li><a href="#è‡ªç­¾å‘è¯ä¹¦">è‡ªç­¾å‘è¯ä¹¦</a></li>
</ul></li>
<li><a href="#æƒé™è®¤è¯">æƒé™è®¤è¯</a>
<ul>
<li><a href="#basic-auth">Basic Auth</a></li>
<li><a href="#jwt">JWT</a></li>
</ul></li>
<li><a href="#ç”¨-cors-è§£å†³è·¨åŸŸ">ç”¨ CORS è§£å†³è·¨åŸŸ</a></li>
<li><a href="#åœ°å€è¿‡æ»¤">åœ°å€è¿‡æ»¤</a></li>
<li><a href="#è¯·æ±‚é™æµ">è¯·æ±‚é™æµ</a></li>
<li><a href="#é‡å®šå‘">é‡å®šå‘</a></li>
</ul></li>
<li><a href="#ç”Ÿäº§ç¯å¢ƒä½¿ç”¨">ç”Ÿäº§ç¯å¢ƒä½¿ç”¨</a>
<ul>
<li><a href="#caddy-é…ç½®">Caddy é…ç½®</a>
<ul>
<li><a href="#ä¿®æ”¹-caddy-å¯æ‰§è¡Œæ–‡ä»¶ä½¿ç”¨æƒé™">ä¿®æ”¹ caddy å¯æ‰§è¡Œæ–‡ä»¶ä½¿ç”¨æƒé™</a></li>
<li><a href="#åˆ›å»ºç”¨æˆ·ç»„-www-data-åŠç”¨æˆ·-www-data">åˆ›å»ºç”¨æˆ·ç»„(www-data)åŠç”¨æˆ·(www-data)</a></li>
<li><a href="#åˆ›å»ºå­˜æ”¾-caddy-é…ç½®æ–‡ä»¶çš„ç›®å½•">åˆ›å»ºå­˜æ”¾ caddy é…ç½®æ–‡ä»¶çš„ç›®å½•</a></li>
<li><a href="#åˆ›å»º-ssl-è¯ä¹¦å­˜æ”¾ç›®å½•">åˆ›å»º SSL è¯ä¹¦å­˜æ”¾ç›®å½•</a></li>
<li><a href="#åˆ›å»º-caddyfile">åˆ›å»º Caddyfile</a></li>
<li><a href="#æœ€å-åˆ›å»ºä¸€ä¸ªç½‘å€æ”¾ç½®ç›®å½•-å¹¶ä¸”å°†éœ€è¦éƒ¨ç½²çš„ç½‘ç«™-ä¾‹å¦‚-qs-com-æ‹·è´åˆ°-www-ç›®å½•ä¸‹">æœ€åï¼Œåˆ›å»ºä¸€ä¸ªç½‘å€æ”¾ç½®ç›®å½•, å¹¶ä¸”å°†éœ€è¦éƒ¨ç½²çš„ç½‘ç«™ (ä¾‹å¦‚ï¼šqs.com ) æ‹·è´åˆ° www ç›®å½•ä¸‹</a></li>
</ul></li>
<li><a href="#ç³»ç»ŸæœåŠ¡-linux">ç³»ç»ŸæœåŠ¡(Linux)</a></li>
</ul></li>
<li><a href="#see-also">See Also</a></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      

<!-- æ‘˜è¦ -->

<!-- more -->

<h1 id="å®‰è£…">å®‰è£…</h1>

<h2 id="linux">Linux</h2>

<blockquote>
<p>Note: You must specify a personal or commercial license; see getcaddy.com for instructions. (å®‰è£…æ—¶è¦æ±‚å¿…é¡»ç»™å‡ºä¸€ç§è®¸å¯è¯ï¼Œæ‰€ä»¥ä¸‹é¢å‘½ä»¤æ·»åŠ äº†é€‰é¡¹ï¼š<code>-s personal</code>)</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># ä¸€é”®å®‰è£…è„šæœ¬</span>
<span class="o">[</span>zhe@zhe Temp<span class="o">]</span>$ curl https://getcaddy.com <span class="p">|</span> bash -s personal 

<span class="c1"># æŸ¥çœ‹æ–‡ä»¶å®‰è£…è·¯å¾„</span>
<span class="o">[</span>zhe@zhe Temp<span class="o">]</span>$ which caddy</code></pre></td></tr></table>
</div>
</div>
<h2 id="windows">Windows</h2>

<p><a href="https://caddyserver.com/download">download</a></p>

<ul>
<li><p>platform é€‰æ‹©éœ€è¦å®‰è£…çš„å¹³å°</p></li>

<li><p>plugins é€‰æ‹©éœ€è¦çš„æ’ä»¶(å¯ä»¥ä¸é€‰)</p></li>

<li><p>ä¸‹è½½å®Œæˆåè§£å‹å³å¯å¾—åˆ° caddy.exe</p></li>
</ul>

<h2 id="source-code">Source code</h2>

<p>ä» <a href="github.com/mholt/caddy/caddy">æºç </a> å®‰è£…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">go get github.com/mholt/caddy/caddy</code></pre></td></tr></table>
</div>
</div>
<p>Note: <a href="https://github.com/Unknwon/wuwen.org/issues/11">ä»æºç å®‰è£…å‚è€ƒ</a></p>

<p><a href="#content"><strong>è¿”å›ç›®å½•</strong></a></p>

<h1 id="è¿è¡Œ">è¿è¡Œ</h1>

<blockquote>
<p>ä»¥ Linux å¹³å°ä½œæµ‹è¯•</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># ç›´æ¥è¿è¡Œå³å¯</span>
<span class="o">[</span>zhe@zhe Temp<span class="o">]</span>$ caddy
Activating privacy features... <span class="k">done</span>.
http://:2015

<span class="c1"># Output: visit http://:2015, got 404 Not Found åˆ™è¡¨ç¤ºæˆåŠŸ</span>

<span class="c1"># ä»æŒ‡å®šçš„ Caddyfile ä¸­è¯»å–é…ç½®å¯åŠ¨æœåŠ¡</span>
<span class="o">[</span>zhe@zhe Temp<span class="o">]</span>$ caddy -conf /path/to/Caddyfile</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: caddy ä»å½“å‰ç›®å½•çš„ <code>Caddyfile(é»˜è®¤)</code> æ–‡ä»¶ä¸­è¯»å–é…ç½®; ä¹Ÿå¯ä»¥é€šè¿‡ <code>-conf</code> æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„</p>
</blockquote>

<p><a href="#content"><strong>è¿”å›ç›®å½•</strong></a></p>

<h1 id="åº”ç”¨-é…ç½®caddy">åº”ç”¨(é…ç½®Caddy)</h1>

<p><strong><code>å®˜æ–¹æ–‡æ¡£</code></strong>ï¼š<a href="https://caddyserver.com/tutorial/caddyfile">Caddyfile Primer(å…¥é—¨ä¹¦)</a>ã€<a href="https://caddyserver.com/docs">Caddyfile Directive(æŒ‡ä»¤ä»‹ç»)</a></p>

<p>Caddyfileæ ¼å¼: Caddyfile æ€»æ˜¯ä»¥ç«™ç‚¹çš„ <code>Addr</code> å¼€å§‹,  <code>#</code> è¡¨ç¤ºæ³¨é‡Šï¼›ä¸”ä¹‹åçš„æ¯ä¸€è¡Œéƒ½æ˜¯å®˜æ–¹æä¾›çš„æŒ‡ä»¤</p>

<h2 id="é™æ€æ–‡ä»¶-server">é™æ€æ–‡ä»¶ Server</h2>

<p>æ–‡ä»¶ç›®å½•ç»“æ„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></pre></td>
<td class="lntd">
<pre class="chroma">[root@qxs /home/caddy/test]$ tree
.
â”œâ”€â”€ caddy
â”œâ”€â”€ Caddyfile
â”œâ”€â”€ test
â”‚Â Â  â””â”€â”€ test.txt
â”œâ”€â”€ test01.txt
â””â”€â”€ test02.txt</pre></td></tr></table>
</div>
</div>
<p>Caddyfile å†…å®¹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">localhost:7055 <span class="o">{</span>
    root ./ 
    browse  <span class="c1"># æ”¯æŒæµè§ˆæ–‡ä»¶</span>
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>Note: å¯¹äºé™æ€æ–‡ä»¶Serverï¼Œcaddyæ”¯æŒåœ¨websiteçš„rootè·¯å¾„ä¸‹é¦–å…ˆæŸ¥æ‰¾æ˜¯å¦æœ‰å¦‚ä¸‹å››ä¸ªæ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// caddy/middleware/browse/browse.go
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">IndexPages</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
    <span class="s">&#34;index.html&#34;</span><span class="p">,</span>
    <span class="s">&#34;index.htm&#34;</span><span class="p">,</span>
    <span class="s">&#34;default.html&#34;</span><span class="p">,</span>
    <span class="s">&#34;default.htm&#34;</span><span class="p">,</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<ul>
<li><p>å¦‚æœæŸ¥åˆ°æœ‰å…¶ä¸­ä¸€ä¸ªï¼Œåˆ™ä¼˜å…ˆè¿”å›è¿™ä¸ªæ–‡ä»¶å†…å®¹ï¼Œè¿™å°±æ˜¯é™æ€ç«™ç‚¹çš„é¦–é¡µã€‚</p></li>

<li><p>å¦‚æœè¦æ”¯æŒç›®å½•æ–‡ä»¶åˆ—è¡¨æµè§ˆï¼Œåˆ™éœ€è¦ä¸º website é…ç½® browse middlewareï¼Œè¿™æ ·å¯¹äºæ—  index file çš„ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›®å½•æ–‡ä»¶åˆ—è¡¨ã€‚</p></li>
</ul>
</blockquote>

<h2 id="å•ä¸€ç«™ç‚¹">å•ä¸€ç«™ç‚¹</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">localhost:8080

gzip                <span class="c1"># æ”¯æŒ gzip å‹ç¼©</span>
root /home/mes/www  <span class="c1"># ç½‘ç«™ç›®å½•</span>
...                 </code></pre></td></tr></table>
</div>
</div>
<h2 id="å¤šç«™ç‚¹éƒ¨ç½²">å¤šç«™ç‚¹éƒ¨ç½²</h2>

<blockquote>
<p>Note: å¤šç«™ç‚¹éƒ¨ç½²å³æ˜¯ï¼š <code>80</code> ç«¯å£å¤šè·¯å¤ç”¨</p>
</blockquote>

<p>å¦‚æœéœ€è¦é…ç½®ç‹¬ç«‹çš„è™šæ‹Ÿä¸»æœºï¼Œéœ€è¦å°†é…ç½®ä¿¡æ¯ç§»åŠ¨åˆ°ç«™ç‚¹åä¹‹åçš„å¤§æ‹¬å·å†…ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mysite.com <span class="o">{</span>
    root /www/mysite.com
<span class="o">}</span>

sub.mysite.com <span class="o">{</span>
    root /www/sub.mysite.com
    gzip
    log ../access.log
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note:</p>

<ul>
<li>å·¦æ‹¬å·å¿…é¡»ä¸ç«™ç‚¹åä½äºåŒä¸€è¡Œï¼Œè€Œå³æ‹¬å·åˆ™æ˜¯å¿…é¡»å•èµ·ä¸€è¡Œ</li>
<li>ç«™ç‚¹åœ°å€é…ç½®å¤šä¸ªçš„è¯ï¼Œéœ€è¦ç”¨ <code>,</code>  <code>ç©ºæ ¼</code> éš”å¼€ï¼Œ ä¸”æœ€åçš„åœ°å€å’Œå¤§æ‹¬å·ä¹‹é—´ä¹Ÿè¦æœ‰ç©ºæ ¼</li>
</ul>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">localhost:2020, https://site.com, http://mysite.com <span class="o">{</span>
    ...
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>å½“ Caddy æ£€æµ‹åˆ°ç«™ç‚¹åç¬¦åˆä¸‹åˆ—æ¡ä»¶æ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨ Let&rsquo;s Encrypt è„šæœ¬æ¥ä¸ºç«™ç‚¹æ·»åŠ  HTTPS æ”¯æŒï¼Œå¹¶ä¸”è‡ªåŠ¨ç›‘å¬ 80 ä¸ 443 ç«¯å£ï¼š</p>

<blockquote>
<ul>
<li><p>ä¸»æœºåä¸å¯ä¸ºç©ºå¹¶ä¸”æ²¡æœ‰ localhost ä¸ IP åœ°å€</p></li>

<li><p>ç«¯å£å·æœªæ˜ç¡®æŒ‡å®šä¸º 80</p></li>

<li><p>Scheme æœªæ˜ç¡®æŒ‡å®šä¸º http</p></li>

<li><p>TLS æœªè¢«å…³é—­</p></li>

<li><p>æœªæŒ‡æ˜è¯ä¹¦</p></li>
</ul>
</blockquote>

<p><a href="#content"><strong>è¿”å›ç›®å½•</strong></a></p>

<h2 id="åå‘ä»£ç†">åå‘ä»£ç†</h2>

<p><code>proxy</code> æŒ‡ä»¤æä¾›äº†åŸºæœ¬çš„åå‘ä»£ç†åŠŸèƒ½, å…¶æ”¯æŒ Health Checks å’Œ Failovers, å¹¶ä¸”æ”¯æŒå¯¹ Websocket çš„åå‘ä»£ç†ã€‚</p>

<ul>
<li><p>å…¶åŸºæœ¬è¯­æ³•ä¸ºï¼š<code>proxy from to</code></p>

<ul>
<li>from: å³æ˜¯è¯·æ±‚åŒ¹é…çš„åŸºæœ¬è·¯å¾„</li>
<li>to: åˆ™æ˜¯è¯·æ±‚è½¬å‘çš„ç«¯ç‚¹åœ°å€ã€‚</li>
</ul></li>

<li><p>å°†æ‰€æœ‰å‘å¾€ /v0 çš„APIæ¥å£è¯·æ±‚è½¬å‘åˆ° localhost:7005 çš„åç«¯æœåŠ¡ç¨‹åº</p></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">proxy /v0 localhost:7005</code></pre></td></tr></table>
</div>
</div>
<ul>
<li>ä½¿ç”¨éšæœºç­–ç•¥å°†æ‰€æœ‰è¯·æ±‚è´Ÿè½½å‡è¡¡åˆ°ä¸‰ä¸ªåç«¯æœåŠ¡å™¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">proxy / web1.local:7005 web2.local:8005 web3.local:8007</code></pre></td></tr></table>
</div>
</div>
<ul>
<li>ä½¿ç”¨å¾ªç¯æœºåˆ¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">proxy / web1.local:80 web2.local:90 web3.local:100 <span class="o">{</span>    
    policy round_robin
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>æ·»åŠ å¥åº·æ£€æŸ¥ï¼Œå¹¶ä¸”é€æ˜è½¬å‘ä¸»æœºåã€åœ°å€ä¸ä¸Šæ¸¸ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">proxy / web1.local:80 web2.local:90 web3.local:100 <span class="o">{</span>    
    policy round_robin
    health_check /health
    transparent
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>è½¬å‘ websocket è¯·æ±‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">proxy /ws localhost:7005 <span class="o">{</span>
    websocket
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>é¿å…å¯¹é™æ€è¯·æ±‚è½¬å‘</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">proxy / localhost:7005 <span class="o">{</span>
    except /static/ /robots.txt
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p>Example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">localhost:2015 <span class="o">{</span>
    log ./2015.log

    proxy /foo localhost:9001
    proxy /bar localhost:9002
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<ul>
<li>å½“è®¿é—® localhost:2015/foo æ—¶ï¼Œå®é™…ä¸Šè®¿é—®çš„æ˜¯ 9001 ç«¯å£çš„æœåŠ¡ç¨‹åºï¼›<br /></li>
<li>å½“è®¿é—® localhost:2015/bar æ—¶ï¼Œå®é™…ä¸Šè®¿é—®çš„æ˜¯ 9002 ç«¯å£çš„æœåŠ¡ç¨‹åºã€‚</li>
</ul>
</blockquote>

<ul>
<li><p>ä½¿ç”¨ <code>transparent</code> æŒ‡ä»¤å¢åŠ  X-* çš„å¤´</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></pre></td>
<td class="lntd">
<pre class="chroma">header_upstream Host {host}
header_upstream X-Real-IP {remote}
header_upstream X-Forwarded-For {remote}
header_upstream X-Forwarded-Proto {scheme}</pre></td></tr></table>
</div>
</div></li>
</ul>

<h3 id="æœåŠ¡å™¨ip-åå‘ä»£ç†">æœåŠ¡å™¨IP åå‘ä»£ç†</h3>

<p>ç”¨æœåŠ¡å™¨çš„ IP æ¥åå‘ä»£ç†ä¸€ä¸ª http åè®®çš„ç½‘ç«™ <a href="http://www.baidu.com">http://www.baidu.com</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">:80 <span class="o">{</span>
    gzip
    proxy / http://www.baidu.com
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: æœåŠ¡å™¨IP ä¹Ÿå¯ä»¥åå‘ä»£ç† HTTPS åè®®çš„ç½‘ç«™ï¼Œä½†æ˜¯éœ€è¦è‡ªç­¾SSLè¯ä¹¦ï¼Œç°åœ¨çš„æµè§ˆå™¨ä¸€èˆ¬éƒ½ä¸ä¼šè®¤ è‡ªç­¾çš„SSLè¯ä¹¦ï¼Œæ‰€ä»¥ä¸å»ºè®®è¿™ä¹ˆåš</p>
</blockquote>

<h3 id="åŸŸå-åå‘ä»£ç†-http">åŸŸå åå‘ä»£ç† HTTP</h3>

<p>ç”¨åŸŸåæ¥åå‘ä»£ç†ä¸€ä¸ª http åè®®çš„ç½‘ç«™ <a href="http://www.baidu.com">http://www.baidu.com</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">http://toyoo.ml <span class="o">{</span>
    gzip
    proxy / http://www.baidu.com
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="åŸŸå-åå‘ä»£ç†-https">åŸŸå åå‘ä»£ç† HTTPS</h3>

<ul>
<li>å¦‚æœæœ‰SSLè¯ä¹¦å’Œå¯†åŒ™çš„è¯, å‚è€ƒ <a href="#372-è‡ªç­¾å‘è¯ä¹¦">HTTPS-è‡ªç­¾å‘è¯ä¹¦</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">https://toyoo.ml <span class="o">{</span>
    gzip
    tls /path/to/xxx.crt /path/to/xxx.key
    proxy / https://www.baidu.com
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>å¦‚æœæ²¡æœ‰ SSLè¯ä¹¦å’Œå¯†åŒ™ï¼Œ å‚è€ƒ<a href="#371-è‡ªåŠ©ç”³è¯·letsencryptè¯ä¹¦">HTTPS-è‡ªåŠ©ç”³è¯·letsencryptè¯ä¹¦</a></li>
</ul>

<h3 id="http-é‡å®šå‘ä¸º-https">HTTP é‡å®šå‘ä¸º HTTPS</h3>

<p>å½“æˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®š SSL è¯ä¹¦å’Œå¯†åŒ™æ¥é…ç½®çš„è¯ï¼ŒCaddy åªä¼šç›‘å¬ 443 ç«¯å£(https)ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨è®¾ç½® 80 ç«¯å£(http)çš„é‡å®šå‘ï¼ˆå¦‚æœæ˜¯Caddyè‡ªåŠ¨ç”³è¯·çš„SSLè¯ä¹¦ï¼Œé‚£ä¹ˆå°±è‡ªåŠ¨åšå¥½äº†ï¼‰ï¼Œå¦‚æœè¦åšé‡å®šå‘çš„è¯ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>

<ul>
<li>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæ˜¯æŠŠ <a href="http://toyoo.mlã€http://233.toyoo.mlã€https://666.toyoo.ml">http://toyoo.mlã€http://233.toyoo.mlã€https://666.toyoo.ml</a> ä¸‰ä¸ªåŸŸåéƒ½é‡å®šå‘åˆ°äº† <a href="https://toyoo.ml">https://toyoo.ml</a></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">http://toyoo.ml, http://233.toyoo.ml, https://666.toyoo.ml <span class="o">{</span>
    redir https://toyoo.ml<span class="o">{</span>url<span class="o">}</span>
<span class="o">}</span>

https://toyoo.ml <span class="o">{</span>
    gzip
    tls /path/to/xxx.crt /path/to/xxx.key
    proxy / https://www.baidu.com
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="è´Ÿè½½å‡è¡¡">è´Ÿè½½å‡è¡¡</h2>

<p>Caddyæ”¯æŒè´Ÿè½½å‡è¡¡é…ç½®ï¼Œå¹¶æ”¯æŒä¸‰ç§è´Ÿè½½å‡è¡¡ç®—æ³•ï¼šrandomï¼ˆéšæœºï¼‰ã€least_connï¼ˆæœ€å°‘è¿æ¥ï¼‰ä»¥åŠ round_robin (è½®è¯¢è°ƒåº¦); è´Ÿè½½å‡è¡¡åŒæ ·æ˜¯é€šè¿‡ proxy middleware å®ç°çš„.</p>

<p>Example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">localhost:2015 <span class="o">{</span>
    log ./2015.log

    proxy / localhost:9001 localhost:9003 <span class="o">{</span>
        policy round_robin
    <span class="o">}</span>
    proxy /bar localhost:9002 localhost:9004 <span class="o">{</span>
        policy least_conn
    <span class="o">}</span>
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p><a href="#content"><strong>è¿”å›ç›®å½•</strong></a></p>

<h2 id="websocket">Websocket</h2>

<p>Caddy å†…å»ºæ”¯æŒ websocket è¿æ¥, å…¶å…è®¸å®¢æˆ·ç«¯å‘èµ· WebSocket è¿æ¥çš„æ—¶å€™æœåŠ¡ç«¯æ‰§è¡ŒæŸä¸ªç®€å•çš„æŒ‡ä»¤ï¼Œå…¶åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span></pre></td>
<td class="lntd">
<pre class="chroma">websocket [path] command</pre></td></tr></table>
</div>
</div>
<p>Caddyfile é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">websocket /echo <span class="s2">&#34;echo &#34;</span>hello world<span class="s2">&#34;&#34;</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="https">HTTPS</h2>

<p>æˆ‘ä»¬åªéœ€è¦æä¾›ä¸€ä¸ªé‚®ç®±è´¦å·ï¼Œ Caddy å³å¯ä½¿ç”¨ <code>tls</code> æŒ‡ä»¤å¯ä¸ºç½‘ç«™å¼€å¯ https åŠŸèƒ½ï¼Œ å¹¶è‡ªåŠ¨ç”³è¯·ã€é…ç½®å’Œç»­çº¦SSLè¯ä¹¦ï¼Œ å…¶å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span></pre></td>
<td class="lntd">
<pre class="chroma">tls your@emial.com</pre></td></tr></table>
</div>
</div>
<p>æˆ–è€…æŒ‡å®šå·²æœ‰è¯ä¹¦å’Œç§é’¥çš„è·¯å¾„, è¿™æ ·çš„è¯ caddy å°±ä¸ä¼šå»è‡ªåŠ¨ç”³è¯·è¯ä¹¦ï¼Œè€Œæ˜¯ä½¿ç”¨è·¯å¾„ç»™å‡ºçš„è¯ä¹¦äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span></pre></td>
<td class="lntd">
<pre class="chroma">tls /path/to/cert.pem /path/to/key.pem</pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note:</p>

<ul>
<li>cert: æŒ‡å®šCAçš„æ ¹è¯ä¹¦<br /></li>
<li>key:  æŒ‡å®šCAçš„ç§æœ‰å¯†é’¥</li>
<li>éœ€è¦åœ¨æµè§ˆå™¨å¯¼å…¥CAè·Ÿè¯ä¹¦</li>
</ul>
</blockquote>

<h3 id="è‡ªåŠ©ç”³è¯·letsencryptè¯ä¹¦">è‡ªåŠ©ç”³è¯·letsencryptè¯ä¹¦</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">https://domain.com <span class="o">{</span>
    gzip
    tls your@email.com
    proxy /api/v0 localhost:7005
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: ç”³è¯· SSLè¯ä¹¦å‰ï¼Œè¯·åŠ¡å¿…æå‰è§£æå¥½åŸŸåè®°å½•(è§£æåæœ€å¥½ç­‰ä¸€ä¼šï¼Œä»¥å…¨çƒç”Ÿæ•ˆ)ï¼Œå¦åˆ™ Caddyä¼šç”³è¯·å¹¶é…ç½®å¤±è´¥ï¼
- Caddyè‡ªåŠ¨ç”³è¯·SSLè¯ä¹¦ä½ç½®ï¼š/.caddy/acme/acme-v01.api.letsencrypt.org/sites/xxx.xxx(åŸŸå)/</p>
</blockquote>

<h3 id="è‡ªç­¾å‘è¯ä¹¦">è‡ªç­¾å‘è¯ä¹¦</h3>

<p>åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œè‡ªç„¶æ²¡æ³•ç”¨ Letâ€™s Encrypt æ¥ç­¾è¯ä¹¦ï¼Œè¿™æ—¶å€™å¯ä»¥ç”¨ tls æŒ‡ä»¤è‡ªç­¾å‘è¯ä¹¦; ä½†æ˜¯ï¼Œå®¢æˆ·ç«¯æ˜¯ä¸è®¤è‡ªç­¾å‘çš„è¯ä¹¦çš„ï¼Œéœ€è¦æ‰‹åŠ¨ä¿¡ä»»ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">https://domain.com <span class="o">{</span>
    gzip
    tls /path/to/cert.pem /path/to/key.pem
    proxy /api/v0 localhost:7005
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: å¯åŠ¨ Caddy æ—¶ï¼ŒCaddy ä¼šè‡ªåŠ¨åœ¨å†…å­˜é‡Œåˆ›å»ºè¯ä¹¦ã€‚ç”±äºè¯ä¹¦æ˜¯å­˜åœ¨å†…å­˜é‡Œçš„ï¼Œæ‰€ä»¥ä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™è¯ä¹¦åˆä¼šé‡æ–°ç”Ÿæˆï¼Œéœ€è¦å†æ¬¡æ‰‹åŠ¨ä¿¡ä»»ã€‚</p>
</blockquote>

<p><a href="#content"><strong>è¿”å›ç›®å½•</strong></a></p>

<h2 id="æƒé™è®¤è¯">æƒé™è®¤è¯</h2>

<h3 id="basic-auth">Basic Auth</h3>

<h3 id="jwt">JWT</h3>

<h2 id="ç”¨-cors-è§£å†³è·¨åŸŸ">ç”¨ CORS è§£å†³è·¨åŸŸ</h2>

<p>ä½¿ç”¨ cors æŒ‡ä»¤å¯ä¸ºæœåŠ¡å™¨æ·»åŠ è·¨åŸŸè¯·æ±‚çš„èƒ½åŠ›ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">cors /v0 <span class="o">{</span>
    origin            http://allowedSite.com
    origin            http://anotherSite.org https://anotherSite.org
    methods           POST,PUT
    allow_credentials <span class="nb">false</span>
    max_age           <span class="m">3600</span>
    allowed_headers   X-Custom-Header,X-Foobar
    exposed_headers   X-Something-Special,SomethingElse
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: åœ¨ allowed_headers &amp; exposed_headers ç­‰ä¸­ï¼Œå„ä¸ªkeyä¹‹é—´åªèƒ½ç”¨ <code>,</code> éš”å¼€ï¼Œä¸”ä¸èƒ½æœ‰å…¶ä»–çš„å­—ç¬¦(ä¾‹å¦‚ï¼šç©ºæ ¼)ç­‰ã€‚</p>
</blockquote>

<h2 id="åœ°å€è¿‡æ»¤">åœ°å€è¿‡æ»¤</h2>

<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>ipfilter</code> æŒ‡ä»¤æ¥åŸºäºç”¨æˆ·çš„ IP æ¥å…è®¸æˆ–è€…é™åˆ¶ç”¨æˆ·è®¿é—®ï¼Œå…¶åŸºæœ¬è¯­æ³•ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ipfilter paths... <span class="o">{</span>
    rule       block <span class="p">|</span> allow
    ip         list or/and range of IPs...
    country    countries ISO codes...
    database   db_path
    blockpage  block_page
    strict
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>ä»…å…è®¸æŸä¸ªIPè®¿é—®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ipfilter / <span class="o">{</span>
    rule allow
    ip <span class="m">93</span>.168.247.245
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="è¯·æ±‚é™æµ">è¯·æ±‚é™æµ</h2>

<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>ratelimit</code> è¿™ä¸ªæ‰©å±•æŒ‡ä»¤æ¥ä¸ºèµ„æºæ·»åŠ è¯·æ±‚é™æµçš„åŠŸèƒ½ï¼Œå¯¹äºå•èµ„æºå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">    ratelimit path rate burst unit 
    
    <span class="c1"># é™åˆ¶å®¢æˆ·ç«¯æ¯ç§’æœ€å¤šå¯¹ /storage/download/terminal.exe èµ„æºå‘èµ·ä¸¤ä¸ªè¯·æ±‚ï¼Œçªå‘ä¸Šçº¿æœ€å¤šä¸º 3 ä¸ª</span>
    ratelimit /storage/download/termianl.exe <span class="m">2</span> <span class="m">3</span> second</code></pre></td></tr></table>
</div>
</div>
<ul>
<li>å¯¹å¤šä¸ªèµ„æºçš„è¯·æ±‚é™æµæ§åˆ¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ratelimit rate burst unit <span class="o">{</span>
    /assets/resource
    /download
    ...
<span class="o">}</span>

<span class="c1"># é™åˆ¶å¯¹äºèµ„æºæ–‡ä»¶çš„è®¿é—®æ—¶é•¿ä¸º 2 åˆ†é’Ÿ</span>
ratelimit <span class="m">2</span> <span class="m">2</span> minute <span class="o">{</span>
    /foo.html
    /dir
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<p><a href="#content"><strong>è¿”å›ç›®å½•</strong></a></p>

<h2 id="é‡å®šå‘">é‡å®šå‘</h2>

<blockquote>
<p>Note: redir é»˜è®¤ä½¿ç”¨æŒ‡ä»¤ <a href="https://caddyserver.com/docs/redir"><code>redir</code></a> å¯ä»¥å®Œæˆè¯·æ±‚è·³è½¬ï¼Œè¯­æ³•æ ¼å¼ä¸ºï¼š</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span></pre></td>
<td class="lntd">
<pre class="chroma">redir from to [code]</pre></td></tr></table>
</div>
</div>
<ul>
<li><p>from: è¯·æ±‚åœ°å€(å¿…é¡»å®Œå…¨åŒ¹é…ï¼Œä¾‹å¦‚ï¼š<code>/</code> å°†åŒ¹é…æ‰€æœ‰)</p></li>

<li><p>to: é‡å®šå‘çš„ç›®çš„åœ°å€ ( è¿™ä¸ªä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://caddyserver.com/docs/placeholders">å ä½ç¬¦</a> )</p></li>

<li><p>code: is the HTTP status code to respond with; must be in the range [300-308] excluding 306. May also be meta to issue meta tag redirect for browsers. The default status code is 301 Moved Permanently.</p></li>
</ul>

<p>Example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">http://bitbucket.robot-qixing.com <span class="o">{</span>
	redir http://192.168.1.8:7990<span class="o">{</span>uri<span class="o">}</span>
<span class="o">}</span>

http://jira.robot-qixing.com <span class="o">{</span>
	redir http://192.168.1.8:8088<span class="o">{</span>uri<span class="o">}</span>
<span class="o">}</span>

http://confluence.robot-qixing.com <span class="o">{</span>
	redir http://192.168.1.8:7999<span class="o">{</span>uri<span class="o">}</span>
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<h1 id="ç”Ÿäº§ç¯å¢ƒä½¿ç”¨">ç”Ÿäº§ç¯å¢ƒä½¿ç”¨</h1>

<p>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨Caddyé…ç½®æ–‡ä»¶ä¸€èˆ¬æ”¾ç½®åœ¨ï¼š<code>/etc/caddy</code> ç›®å½•ä¸‹, ä¸”ä¸è¦ä½¿ç”¨ root è´¦å·å»è¿è¡Œ caddy</p>

<p><strong>Instructions</strong></p>

<ul>
<li>run caddy as user <code>www-data</code> and group <code>www-data</code>, with UID and GID 33</li>
</ul>

<h2 id="caddy-é…ç½®">Caddy é…ç½®</h2>

<h3 id="ä¿®æ”¹-caddy-å¯æ‰§è¡Œæ–‡ä»¶ä½¿ç”¨æƒé™">ä¿®æ”¹ caddy å¯æ‰§è¡Œæ–‡ä»¶ä½¿ç”¨æƒé™</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo cp /path/to/caddy /usr/local/bin
sudo chown root:root /usr/local/bin/caddy
sudo chmod <span class="m">755</span> /usr/local/bin/caddy</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Give the caddy binary the ability to bind to privileged ports (e.g. 80, 443) as a non-root user:</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo setcap <span class="s1">&#39;cap_net_bind_service=+ep&#39;</span> /usr/local/bin/caddy</code></pre></td></tr></table>
</div>
</div>
<h3 id="åˆ›å»ºç”¨æˆ·ç»„-www-data-åŠç”¨æˆ·-www-data">åˆ›å»ºç”¨æˆ·ç»„(www-data)åŠç”¨æˆ·(www-data)</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo groupadd -g <span class="m">33</span> www-data
sudo useradd <span class="se">\
</span><span class="se"></span>  -g www-data --no-user-group <span class="se">\
</span><span class="se"></span>  --home-dir /var/www --no-create-home <span class="se">\
</span><span class="se"></span>  --shell /usr/sbin/nologin <span class="se">\
</span><span class="se"></span>  --system --uid <span class="m">33</span> www-data</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: å¯èƒ½å‡ºç°é”™è¯¯ï¼šuseradd: UID 33 is not uniqueï¼Œè¿™é‡Œæ¢æˆ 333 é‡æ–°æ‰§è¡Œå³å¯(é—®é¢˜åŸå› è¿˜æœªæŸ¥æ˜éªŒè¯)</p>
</blockquote>

<h3 id="åˆ›å»ºå­˜æ”¾-caddy-é…ç½®æ–‡ä»¶çš„ç›®å½•">åˆ›å»ºå­˜æ”¾ caddy é…ç½®æ–‡ä»¶çš„ç›®å½•</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo mkdir /etc/caddy
sudo chown -R root:www-data /etc/caddy</code></pre></td></tr></table>
</div>
</div>
<h3 id="åˆ›å»º-ssl-è¯ä¹¦å­˜æ”¾ç›®å½•">åˆ›å»º SSL è¯ä¹¦å­˜æ”¾ç›®å½•</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo mkdir -p /etc/ssl/caddy
sudo touch www-data:root /etc/ssl/caddy
sudo chmod <span class="m">0770</span> /etc/ssl/caddy </code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: å› ä¸º ssl æ–‡ä»¶å¤¹é‡Œå­˜æ”¾ç§é’¥ï¼Œæ‰€ä»¥æƒé™è®¾ç½®æˆ 0770 ç¦æ­¢å…¶ä»–ç”¨æˆ·è®¿é—®</p>
</blockquote>

<h3 id="åˆ›å»º-caddyfile">åˆ›å»º Caddyfile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo cp /path/to/Caddyfile /etc/caddy/
sudo chown www-data:www-data /etc/caddy/Caddyfile
sudo chmod <span class="m">444</span> /etc/caddy/Caddyfile</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: è¿™é‡Œ Caddyfile æƒé™åœ¨ root(æˆ‘å½“å‰ç™»å½•ç”¨æˆ·) æ—¶æ˜¯ <code>read-only</code>ï¼Œ æ‰€ä»¥éœ€è¦æ³¨æ„ä¿®æ”¹è¯¥æ–‡ä»¶æ—¶è¦èµ‹äºˆå®ƒå¯å†™çš„æƒé™</p>
</blockquote>

<h3 id="æœ€å-åˆ›å»ºä¸€ä¸ªç½‘å€æ”¾ç½®ç›®å½•-å¹¶ä¸”å°†éœ€è¦éƒ¨ç½²çš„ç½‘ç«™-ä¾‹å¦‚-qs-com-æ‹·è´åˆ°-www-ç›®å½•ä¸‹">æœ€åï¼Œåˆ›å»ºä¸€ä¸ªç½‘å€æ”¾ç½®ç›®å½•, å¹¶ä¸”å°†éœ€è¦éƒ¨ç½²çš„ç½‘ç«™ (ä¾‹å¦‚ï¼šqs.com ) æ‹·è´åˆ° www ç›®å½•ä¸‹</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo mkdir -p /var/www
sudo chown www-data:www-data /var/www
sudo chmod <span class="m">555</span> /var/www</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo cp -R qs.com /var/www/
sudo chown -R www-data:www-data /var/www/qs.com
sudo chmod -R <span class="m">555</span> /var/www/qs.com</code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Noet: éƒ¨ç½²ç«™ç‚¹æ—¶éœ€è¦åœ¨Caddyfileä¸­ç”¨æŒ‡ä»¤ï¼š root /var/www/qs.com æŒ‡å®šç½‘ç«™æ ¹ç›®å½•, example:</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">domain.com <span class="o">{</span>
    root /var/www/qx.com
    ...
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="ç³»ç»ŸæœåŠ¡-linux">ç³»ç»ŸæœåŠ¡(Linux)</h2>

<p><a href="https://github.com/mholt/caddy/blob/master/dist/init/linux-systemd/README.md">README</a></p>

<p>åˆ›å»º systemd service</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo cp caddy.service /etc/systemd/system/
sudo chown root:root /etc/systemd/system/caddy.service
sudo chmod <span class="m">644</span> /etc/systemd/system/caddy.service</code></pre></td></tr></table>
</div>
</div>
<p>caddy.service å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Caddy HTTP/2 web server
<span class="nv">After</span><span class="o">=</span>syslog.target
<span class="nv">After</span><span class="o">=</span>network.target

<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">User</span><span class="o">=</span>www-data
<span class="nv">Group</span><span class="o">=</span>www-data
<span class="nv">LimitNOFILE</span><span class="o">=</span><span class="m">64000</span>
<span class="nv">ExecStart</span><span class="o">=</span>/usr/local/bin/caddy --conf<span class="o">=</span>/etc/caddy/Caddyfile
<span class="nv">Restart</span><span class="o">=</span>on-failure

<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target</code></pre></td></tr></table>
</div>
</div>
<p>å¯åŠ¨æœåŠ¡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo systemctl daemon-reload
sudo systemctl start caddy.service
sudo systemctl status caddy.service</code></pre></td></tr></table>
</div>
</div>
<h1 id="see-also">See Also</h1>

<blockquote>
<p>Thanks to the authors ğŸ™‚</p>
</blockquote>

<ul>
<li><a href="https://github.com/Unknwon/wuwen.org/issues/11">Caddy éƒ¨ç½²å®è·µ</a></li>
<li><a href="https://lengzzz.com/note/caddy-http-2-web-server-guide-for-beginners">Caddy HTTPS server</a></li>
<li><a href="https://studygolang.com/articles/9687">Caddyï¼Œä¸€ä¸ªç”¨Goå®ç°çš„Web Server</a></li>
<li><a href="https://segmentfault.com/a/1190000008742322#articleHeader5">æ¸…æ–°è„±ä¿—çš„ Web æœåŠ¡å™¨ Caddy</a></li>
<li><a href="https://doub.io/jzzy-2/">åˆ©ç”¨ Caddy éå¸¸ç®€å•çš„éƒ¨ç½² åå‘ä»£ç†/é•œåƒï¼ˆæ”¯æŒè‡ªç­¾SSLè¯ä¹¦ï¼‰</a></li>
<li><a href="http://gtfix.com/2017/09/12/Caddy_config/">Caddyçš„å†…å®¹é›†åˆ</a></li>
<li><a href="https://www.sooele.com/index.php/2018/01/31/caddy%E6%9C%80%E5%AE%B9%E6%98%93%E4%B8%8A%E6%89%8B%E7%9A%84web-server-%E8%87%AA%E5%8A%A8%E5%8C%96https%E4%B8%80%E5%88%86%E9%92%9F%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99%E7%BD%91%E7%9B%98-2/">https://www.sooele.com/index.php/2018/01/31/caddy%E6%9C%80%E5%AE%B9%E6%98%93%E4%B8%8A%E6%89%8B%E7%9A%84web-server-%E8%87%AA%E5%8A%A8%E5%8C%96https%E4%B8%80%E5%88%86%E9%92%9F%E9%83%A8%E7%BD%B2%E7%BD%91%E7%AB%99%E7%BD%91%E7%9B%98-2/</a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">zher</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2018-04-24
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/web/">web</a>
          <a href="/tags/caddy/">caddy</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/tech/db/mongodb/20170423-config-options/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">MongoDB | é…ç½®é€‰é¡¹</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/tech/devops/docker/20170410-dockerfile/">
            <span class="next-text nav-default">Docker | Dockerfile</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '2017-04-19 17:53:01 \x2b0800 CST',
        title: 'Caddy | å­¦ä¹ ç¬”è®°',
        clientID: '4357c1dbcf7ef0515c29',
        clientSecret: '1ad00adfd9544bff956529daf898d4b81fed2a9d',
        repo: 'blog-comments',
        owner: 'ijayer',
        admin: ['ijayer'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:zhezh.boy@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/JayerCheung" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.facebook.com/zhe.zh.54" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://plus.google.com/u/0/103084907763171979239" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/ijayer" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/p/1005053510554731/home?from=page_100505&amp;mod=TAB&amp;is_all=1#place" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/boy-zhe/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.instagram.com/zher09/" class="iconfont icon-instagram" title="instagram"></a>
  <a href="https://ijayer.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">jayer</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123995495-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>

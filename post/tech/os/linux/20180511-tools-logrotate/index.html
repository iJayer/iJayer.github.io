<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Linux | Tools | Logrotate ä½¿ç”¨æ€»ç»“ - ijayer</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="zher" /><meta name="description" content="æ—¥å¿—å®åœ¨æ˜¯å¤ªæœ‰ç”¨äº†ï¼Œå®ƒè®°å½•äº†ç¨‹åºè¿è¡Œæ—¶å„ç§ä¿¡æ¯ã€‚é€šè¿‡æ—¥å¿—å¯ä»¥åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œè®°å½•è¿è¡Œè½¨è¿¹ï¼ŒæŸ¥æ‰¾ç¨‹åºé—®é¢˜ã€‚å¯æƒœç£ç›˜çš„ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå°±åƒé£æœºé‡Œçš„é»‘" /><meta name="keywords" content="linux, logrotate" />






<meta name="generator" content="Hugo 0.55.6 with theme even" />


<link rel="canonical" href="https://ijayer.github.io/post/tech/os/linux/20180511-tools-logrotate/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Linux | Tools | Logrotate ä½¿ç”¨æ€»ç»“" />
<meta property="og:description" content="æ—¥å¿—å®åœ¨æ˜¯å¤ªæœ‰ç”¨äº†ï¼Œå®ƒè®°å½•äº†ç¨‹åºè¿è¡Œæ—¶å„ç§ä¿¡æ¯ã€‚é€šè¿‡æ—¥å¿—å¯ä»¥åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œè®°å½•è¿è¡Œè½¨è¿¹ï¼ŒæŸ¥æ‰¾ç¨‹åºé—®é¢˜ã€‚å¯æƒœç£ç›˜çš„ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå°±åƒé£æœºé‡Œçš„é»‘" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ijayer.github.io/post/tech/os/linux/20180511-tools-logrotate/" />
<meta property="article:published_time" content="2018-05-11T17:53:01&#43;08:00"/>
<meta property="article:modified_time" content="2018-05-11T19:53:01&#43;00:00"/>

<meta itemprop="name" content="Linux | Tools | Logrotate ä½¿ç”¨æ€»ç»“">
<meta itemprop="description" content="æ—¥å¿—å®åœ¨æ˜¯å¤ªæœ‰ç”¨äº†ï¼Œå®ƒè®°å½•äº†ç¨‹åºè¿è¡Œæ—¶å„ç§ä¿¡æ¯ã€‚é€šè¿‡æ—¥å¿—å¯ä»¥åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œè®°å½•è¿è¡Œè½¨è¿¹ï¼ŒæŸ¥æ‰¾ç¨‹åºé—®é¢˜ã€‚å¯æƒœç£ç›˜çš„ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå°±åƒé£æœºé‡Œçš„é»‘">


<meta itemprop="datePublished" content="2018-05-11T17:53:01&#43;08:00" />
<meta itemprop="dateModified" content="2018-05-11T19:53:01&#43;00:00" />
<meta itemprop="wordCount" content="2357">



<meta itemprop="keywords" content="linux,tools," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux | Tools | Logrotate ä½¿ç”¨æ€»ç»“"/>
<meta name="twitter:description" content="æ—¥å¿—å®åœ¨æ˜¯å¤ªæœ‰ç”¨äº†ï¼Œå®ƒè®°å½•äº†ç¨‹åºè¿è¡Œæ—¶å„ç§ä¿¡æ¯ã€‚é€šè¿‡æ—¥å¿—å¯ä»¥åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œè®°å½•è¿è¡Œè½¨è¿¹ï¼ŒæŸ¥æ‰¾ç¨‹åºé—®é¢˜ã€‚å¯æƒœç£ç›˜çš„ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå°±åƒé£æœºé‡Œçš„é»‘"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">ijayer</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/categories/footprint/">
        <li class="mobile-menu-item">FootPrint</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">ijayer</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/footprint/">FootPrint</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Linux | Tools | Logrotate ä½¿ç”¨æ€»ç»“</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-05-11 </span>
        <div class="post-category">
            <a href="/categories/tech/"> tech </a>
            </div>
          <span class="more-meta"> 2357 words </span>
          <span class="more-meta"> 5 mins read </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> times read </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li><a href="#name">Name</a></li>
<li><a href="#synopsis-æ¦‚è¦">Synopsis æ¦‚è¦</a></li>
<li><a href="#description">Description</a></li>
<li><a href="#options">Options</a></li>
<li><a href="#configuration-file">Configuration File</a>
<ul>
<li><a href="#logroate-é»˜è®¤å®‰è£…çš„æ–‡ä»¶å­˜å‚¨ä½ç½®è¯´æ˜">logroate é»˜è®¤å®‰è£…çš„æ–‡ä»¶å­˜å‚¨ä½ç½®è¯´æ˜</a></li>
<li><a href="#æŸ¥çœ‹-logrotate-ä¸»æ–‡ä»¶é»˜è®¤é…ç½®æƒ…å†µ">æŸ¥çœ‹ logrotate ä¸»æ–‡ä»¶é»˜è®¤é…ç½®æƒ…å†µ</a></li>
<li><a href="#ä»¥-nginx-çš„é…ç½®ä¸ºä¾‹å¯¹-logroate-çš„é…ç½®æ–‡ä»¶åŠ ä»¥è¯´æ˜">ä»¥ Nginx çš„é…ç½®ä¸ºä¾‹å¯¹ logroate çš„é…ç½®æ–‡ä»¶åŠ ä»¥è¯´æ˜</a></li>
</ul></li>
<li><a href="#logrotate-å¸¸ç”¨é…ç½®å‚æ•°æ³¨è§£">logrotate å¸¸ç”¨é…ç½®å‚æ•°æ³¨è§£</a></li>
<li><a href="#logrotate-æœºåˆ¶å’ŒåŸç†">logrotate æœºåˆ¶å’ŒåŸç†</a></li>
<li><a href="#see-also">See Also</a></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      

<!-- æ‘˜è¦ -->

<!-- more -->

<blockquote>
<p>æ—¥å¿—å®åœ¨æ˜¯å¤ªæœ‰ç”¨äº†ï¼Œå®ƒè®°å½•äº†ç¨‹åºè¿è¡Œæ—¶å„ç§ä¿¡æ¯ã€‚é€šè¿‡æ—¥å¿—å¯ä»¥åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œè®°å½•è¿è¡Œè½¨è¿¹ï¼ŒæŸ¥æ‰¾ç¨‹åºé—®é¢˜ã€‚å¯æƒœç£ç›˜çš„ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå°±åƒé£æœºé‡Œçš„é»‘åŒ£å­ï¼Œè®°å½•çš„ä¿¡æ¯å†é‡è¦ä¹Ÿåªèƒ½è®°å½•æœ€åä¸€æ®µæ—¶é—´å‘ç”Ÿçš„äº‹ã€‚ä¸ºäº†èŠ‚çœç©ºé—´å’Œæ•´ç†æ–¹ä¾¿ï¼Œæ—¥å¿—æ–‡ä»¶ç»å¸¸éœ€è¦æŒ‰æ—¶é—´æˆ–å¤§å°ç­‰ç»´åº¦åˆ†æˆå¤šä»½ï¼Œåˆ é™¤æ—¶é—´ä¹…è¿œçš„æ—¥å¿—æ–‡ä»¶ã€‚è¿™å°±æ˜¯é€šå¸¸è¯´çš„æ—¥å¿—æ»šåŠ¨(log rotation)</p>
</blockquote>

<h1 id="name">Name</h1>

<p>logrotate: rotates(å›æ»š)ã€compresses(å‹ç¼©)ã€and mails(é‚®å¯„) system logs</p>

<h1 id="synopsis-æ¦‚è¦">Synopsis æ¦‚è¦</h1>

<p><code>logrotate [-dv] [-f|--force] [-s|--state file] config_file ..</code></p>

<h1 id="description">Description</h1>

<p><code>logrotate</code> is designed to ease(ç¼“è§£) administration of systems(ç³»ç»Ÿç®¡ç†) that generate large numbers of log files. It allows automatic rotation, compression, removal(åˆ‡é™¤), and mailing of log files. Each log file may be handled daily, weekly, monthly, or when it grows too large.</p>

<p>Normally, <code>logrotate</code> is run as a daily cron job. It will not modify a log multiple times(å¤šæ¬¡) in one day unless the criterion[krÄ«Ëˆti(É™)rÄ“É™n, æ ‡å‡†] for that log is based on the <code>log's size</code> and logrotate is being <code>run multiple times</code> each day, or unless the <code>-f or --force</code> option is used.</p>

<p>Any number of config files may be given on the command line. Later config files may override the options given in earlier files[åæ¥çš„é…ç½®æ–‡ä»¶å¯èƒ½ä¼šè¦†ç›–æ—©æœŸæ–‡ä»¶ä¸­ç»™å‡ºçš„é€‰é¡¹], so the order in which the logrotate config files are listed is important. Normally, a single config file which includes any other config files which are needed should be used. See below for more information on how to use the include directive to accomplish this. If a directory is given on the command line, every file in that directory is used as a config file.</p>

<h1 id="options">Options</h1>

<ul>
<li>-d, &ndash;debug<br />
Turns on debug mode and implies -v. In debug mode, no changes will be made to the logs or to the logrotate state file. (æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯¯ï¼Œä»…è°ƒè¯•ï¼Œä¸åšå®é™…å¤„ç†)</li>
<li>-f, &ndash;force å¼ºåˆ¶è½¬å‚¨æ–‡ä»¶</li>
<li>-m, &ndash;mail &lsquo;command&rsquo; å‘é€æ—¥å¿—åˆ°æŒ‡å®šé‚®ç®±</li>
<li>-s, &ndash;state &lsquo;statefile&rsquo; ä½¿ç”¨æŒ‡å®šçš„çŠ¶æ€æ–‡ä»¶</li>
<li>-v, &ndash;verbose æ˜¾ç¤ºè½¬å‚¨è¿‡ç¨‹</li>
</ul>

<h1 id="configuration-file">Configuration File</h1>

<h2 id="logroate-é»˜è®¤å®‰è£…çš„æ–‡ä»¶å­˜å‚¨ä½ç½®è¯´æ˜">logroate é»˜è®¤å®‰è£…çš„æ–‡ä»¶å­˜å‚¨ä½ç½®è¯´æ˜</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">/etc/cron.daily                         <span class="c1"># logrotateè„šæœ¬æ–‡ä»¶å­˜æ”¾ä½ç½®</span>
/etc/logrotate.conf                     <span class="c1"># ä¸»é…ç½®æ–‡ä»¶</span>
/etc/logrotate.d/                       <span class="c1"># ç‰¹å®šæœåŠ¡æ—¥å¿—å­˜å‚¨ç›®å½•(è‡ªå·±è®¾å®šçš„é…ç½®æ–‡ä»¶), è¯¥ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šè¢«ä¸»åŠ¨çš„è¯»å…¥ /etc/logrotate.conf ä¸­æ‰§è¡Œ</span>
/etc/sbin/logrotate                     <span class="c1"># äºŒè¿›åˆ¶ç¨‹åºæ–‡ä»¶</span>
/var/lib/logrotate/logrotate.status     <span class="c1"># çŠ¶æ€æ–‡ä»¶</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: logrotate æ˜¯åŸºäº <code>cron</code> æ¥è¿è¡Œçš„ï¼Œå…¶è„šæœ¬æ˜¯ /etc/cron.daily/logrotateï¼Œ <code>æ—¥å¿—è½®è½¬æ˜¯ç³»ç»Ÿè‡ªåŠ¨å®Œæˆçš„</code>ã€‚å®é™…è¿è¡Œæ—¶ï¼Œlogrotate ä¼šè°ƒç”¨é…ç½®æ–‡ä»¶ /etc/logrotate.confã€‚</p>
</blockquote>

<h2 id="æŸ¥çœ‹-logrotate-ä¸»æ–‡ä»¶é»˜è®¤é…ç½®æƒ…å†µ">æŸ¥çœ‹ logrotate ä¸»æ–‡ä»¶é»˜è®¤é…ç½®æƒ…å†µ</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ cat /etc/logrotate.conf

<span class="c1"># see &#34;man logrotate&#34; for details</span>                                   
<span class="c1"># rotate log files weekly</span>                                           
weekly                      <span class="c1"># æ¯å‘¨è½¬å‚¨ä¸€æ¬¡</span>                                                
                                                                    
<span class="c1"># keep 4 weeks worth of backlogs</span>                                    
rotate <span class="m">4</span>                    <span class="c1"># ä¿ç•™4ä¸ªæ—¥å¿—å¤‡ä»½æ–‡ä»¶</span>                                        
                                                                    
<span class="c1"># create new (empty) log files after rotating old ones</span>              
create                      <span class="c1"># rotateåï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶</span>                                        
                                                                    
<span class="c1"># use date as a suffix of the rotated file</span>                          
dateext                     <span class="c1"># è½®è½¬çš„æ—¥å¿—åå­—å¸¦æœ‰æ—¥æœŸä¿¡æ¯</span>                                        
                                                                    
<span class="c1"># uncomment this if you want your log files compressed</span>              
<span class="c1">#compress</span>                                                           
                                                                    
<span class="c1"># RPM packages drop log rotation information into this directory</span>    
include /etc/logrotate.d    <span class="c1"># æ­¤ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ä¼˜å…ˆç”Ÿæ•ˆ</span>                                       
                                                                    
<span class="c1"># no packages own wtmp and btmp -- we&#39;ll rotate them here</span>           
/var/log/wtmp <span class="o">{</span>             <span class="c1"># æŒ‡å®š/var/log/wtmpæ—¥å¿—æ–‡ä»¶;</span>
    monthly                 <span class="c1"># æ¯æœˆè½®è½¬ä¸€æ¬¡,ä¼˜å…ˆäºå…¨å±€è®¾å®šçš„æ¯å‘¨è½®è½¬ä¸€æ¬¡;</span>
    minsize 1M              <span class="c1"># æ—¥å¿—æ–‡ä»¶å¤§äº1Mæ‰ä¼šå»è½®è½¬;</span>
    create <span class="m">0664</span> root utmp   <span class="c1"># æ–°æ—¥å¿—æ–‡ä»¶çš„æƒé™,å±ä¸»,å±ç»„;</span>
    rotate <span class="m">1</span>                <span class="c1"># ä¿ç•™ä¸€ä¸ªæ—¥å¿—å¤‡ä»½,ä¼˜å…ˆäºå…¨å±€è®¾ç½®çš„å››ä¸ª;</span>
<span class="o">}</span>

/var/log/btmp <span class="o">{</span>             <span class="c1"># æŒ‡å®š/var/log/btmpæ—¥å¿—æ–‡ä»¶;</span>
    missingok               <span class="c1"># å¦‚æœæ—¥å¿—ä¸¢å¤±,ä¸æŠ¥é”™;</span>
    monthly
    create <span class="m">0600</span> root utmp
    rotate <span class="m">1</span>
<span class="o">}</span>                                                                 
                                                                    
<span class="c1"># system-specific logs may be also be configured here.</span>   
<span class="c1"># ç³»ç»Ÿç‰¹å®šçš„æ—¥å¿—ä¹Ÿå¯ä»¥åœ¨ä¸»æ–‡ä»¶ä¸­é…ç½®ã€‚</span>           </code></pre></td></tr></table>
</div>
</div>
<h2 id="ä»¥-nginx-çš„é…ç½®ä¸ºä¾‹å¯¹-logroate-çš„é…ç½®æ–‡ä»¶åŠ ä»¥è¯´æ˜">ä»¥ Nginx çš„é…ç½®ä¸ºä¾‹å¯¹ logroate çš„é…ç½®æ–‡ä»¶åŠ ä»¥è¯´æ˜</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">/var/log/nginx/*.log <span class="o">{</span>
        daily
        missingok
        rotate <span class="m">52</span>
        compress
        delaycompress
        notifempty
        create <span class="m">640</span> nginx adm
        sharedscripts
        postrotate
                <span class="k">if</span> <span class="o">[</span> -f /var/run/nginx.pid <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                        <span class="nb">kill</span> -USR1 <span class="sb">`</span>cat /var/run/nginx.pid<span class="sb">`</span>
                <span class="k">fi</span>
        endscript
<span class="o">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>é¦–å…ˆç¬¬ä¸€è¡Œï¼Œé…ç½®äº†è¦è‡ªåŠ¨è½®æ¢çš„æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„/var/log/nginx/<em>.logï¼Œå³é’ˆå¯¹åœ¨/var/log/nginxä¸‹çš„</em>.logæ–‡ä»¶è¿›è¡Œè½®æ¢</li>
<li>å…¶ä»–å‚è€ƒ <a href="#7-logrotate-å¸¸ç”¨é…ç½®å‚æ•°æ³¨è§£">logrotate å¸¸ç”¨é…ç½®å‚æ•°æ³¨è§£</a></li>
</ul>

<h1 id="logrotate-å¸¸ç”¨é…ç½®å‚æ•°æ³¨è§£">logrotate å¸¸ç”¨é…ç½®å‚æ•°æ³¨è§£</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">daily,weekly,monthly    <span class="c1"># è½¬å‚¨å‘¨æœŸåˆ†åˆ«æ˜¯æ¯å¤©/æ¯å‘¨/æ¯æœˆ;</span>
minsize 15M             <span class="c1"># æ—¥å¿—ä½“ç§¯å¤§äºæ­¤å€¼æ—¶è½®æ¢(ä¾‹å¦‚:100K,4M);</span>
dateext	                <span class="c1"># è½®è¯¢çš„æ–‡ä»¶åå­—å¸¦æœ‰æ—¥æœŸä¿¡æ¯;</span>
missingok               <span class="c1"># å¦‚æœæ—¥å¿—æ–‡ä»¶ä¸¢å¤±,ä¸è¦æ˜¾ç¤ºé”™è¯¯;</span>
rotate <span class="m">5</span>                <span class="c1"># è½®è½¬å­˜å‚¨ä¸­åŒ…å«å¤šå°‘å¤‡ä»½æ—¥å¿—æ–‡ä»¶,0ä¸ºæ— å¤‡ä»½,ä»¥æ•°å­—ä¸ºå‡†; å…¶ä»–æ—§çš„æ—¥å¿—æ–‡ä»¶åˆ™åˆ æ‰(é…åˆdailyä½¿ç”¨)</span>
compress                <span class="c1"># é€šè¿‡gzipå‹ç¼©è½¬å‚¨ä»¥åçš„æ—¥å¿—,ä»¥*.gzç»“å°¾;</span>
nocompress              <span class="c1"># ä¸éœ€è¦å‹ç¼©æ—¶,ç”¨è¿™ä¸ªå‚æ•°;</span>
delaycompress           <span class="c1"># å»¶è¿Ÿå‹ç¼©,å’Œcompressä¸€èµ·ä½¿ç”¨æ—¶å‹ç¼©æ‰€æœ‰æ—¥å¿—,é™¤å½“å‰å’Œä¸‹ä¸€ä¸ªæœ€è¿‘çš„; å»¶è¿Ÿå‹ç¼©ä»»åŠ¡ç›´åˆ°ç¬¬äºŒæ¬¡è½®æ¢æ—¥å¿—æ‰è¿›è¡Œï¼Œç»“æœä¼šå¯¼è‡´ä½ ä¼šæœ‰å½“å‰çš„æ—¥å¿—æ–‡ä»¶ï¼Œä¸€ä¸ªè¾ƒæ—§çš„æ²¡æœ‰è¢«å‹ç¼©è¿‡çš„æ—¥å¿—æ–‡ä»¶å’Œä¸€äº›å‹ç¼©è¿‡çš„æ—¥å¿—æ–‡ä»¶</span>
compresscmd             <span class="c1"># è®¾ç½®ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤è¿›è¡Œå‹ç¼©ï¼Œé»˜è®¤gzip</span>
uncompresscmd           <span class="c1"># è®¾ç½®è§£å‹çš„å‘½ä»¤ï¼Œé»˜è®¤gunzip</span>
nodelaycompress         <span class="c1"># è¦†ç›–delaycompressé€‰é¡¹ï¼Œè½¬å‚¨åŒæ—¶å‹ç¼©;</span>
copytruncate            <span class="c1"># ç”¨äºè¿˜åœ¨æ‰“å¼€ä¸­çš„æ—¥å¿—æ–‡ä»¶,æŠŠå½“å‰æ—¥å¿—å¤‡ä»½å¹¶æˆªæ–­;</span>
nocopytruncate          <span class="c1"># å¤‡ä»½æ—¥å¿—æ–‡ä»¶ä½†æ˜¯ä¸æˆªæ–­;</span>
create <span class="m">644</span> www root     <span class="c1"># è½¬å‚¨æ–‡ä»¶,ä½¿ç”¨æŒ‡å®šçš„æ–‡ä»¶æ¨¡å¼åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶;</span>
nocreate                <span class="c1"># ä¸å»ºç«‹æ–°çš„æ—¥å¿—æ–‡ä»¶;</span>
errors renwole@my.org   <span class="c1"># ä¸“å‚¨æ—¶çš„é”™è¯¯ä¿¡æ¯å‘é€åˆ°æŒ‡å®šçš„Emailåœ°å€;</span>
ifempty                 <span class="c1"># å³ä½¿æ˜¯ç©ºæ–‡ä»¶ä¹Ÿè½¬å‚¨ï¼Œè¿™ä¸ªæ˜¯logrotateçš„ç¼ºçœé€‰é¡¹ï¼›</span>
notifempty              <span class="c1"># å¦‚æœæ—¥å¿—æ–‡ä»¶ä¸ºç©ºï¼Œåˆ™ä¸è½¬å‚¨;</span>
mail renwole@my.org     <span class="c1"># æŠŠè½¬å‚¨çš„æ—¥å¿—æ–‡ä»¶å‘é€åˆ°æŒ‡å®šçš„E-mailåœ°;</span>
nomail                  <span class="c1"># è½¬å‚¨æ—¶ä¸å‘é€æ—¥å¿—æ–‡ä»¶;</span>
olddir /tmp             <span class="c1"># è½¬å‚¨åçš„æ—¥å¿—æ–‡ä»¶æ”¾å…¥æŒ‡å®šç›®å½•,å¿…é¡»å’Œå½“å‰æ—¥å¿—æ–‡ä»¶åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ;</span>    
noolddir                <span class="c1"># è½¬å‚¨åçš„æ—¥å¿—æ–‡ä»¶å’Œå½“å‰æ—¥å¿—æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹;</span>
tabooext                <span class="c1"># ä¸è½¬å‚¨æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶,ç¼ºçœæ‰©å±•åï¼šcfsaved,.disabled,.dpkg-distç­‰;</span>  
dateformat              <span class="c1"># é…åˆdateextä½¿ç”¨å¯ä»¥ä¸ºåˆ‡å‰²åçš„æ—¥å¿—åŠ ä¸ŠYYYYMMDDæ ¼å¼çš„æ—¥æœŸ;</span>
prerotate/endscript     <span class="c1"># åœ¨è½¬å‚¨ä»¥å‰éœ€è¦æ‰§è¡Œçš„å‘½ä»¤å¯ä»¥æ”¾å…¥è¿™ä¸ªå¯¹,è¿™ä¸¤ä¸ªå…³é”®å­—å¿…é¡»å•ç‹¬æˆè¡Œ;</span>    
postrotate/endscript    <span class="c1"># åœ¨è½¬å‚¨ä»¥åéœ€è¦æ‰§è¡Œçš„å‘½ä»¤å¯ä»¥æ”¾å…¥è¿™ä¸ªå¯¹,è¿™ä¸¤ä¸ªå…³é”®å­—å¿…é¡»å•ç‹¬æˆè¡Œ;</span>    
sharedscripts           <span class="c1"># å…±äº«è„šæœ¬,è®©postrotate/endscriptåŒ…å«è„šæœ¬åªæ‰§è¡Œä¸€æ¬¡å³å¯; å³åœ¨æ‰€æœ‰çš„æ—¥å¿—è½¬æ¢å®Œæ¯•åæ‰§è¡Œpostrotateè„šæœ¬ã€‚å¦‚æœè¯¥é¡¹æ²¡æœ‰è®¾ç½®ï¼Œåˆ™ä¼šåœ¨æ¯ä¸ªåŒ¹é…çš„æ—¥å¿—è½®æ¢åæ‰§è¡Œpostrotateè„šæœ¬ã€‚</span></code></pre></td></tr></table>
</div>
</div>
<blockquote>
<p>Note: ä»¥ä¸Šå‚æ•°éƒ½å¯ä»¥åœ¨å…¨å±€ä¸»é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ï¼Œæˆ–æŒ‡å®šä¸ºæŸä¸ªæ—¥å¿—æ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œæ³¨æ„ï¼šä½¿ç”¨æ—¶å‚æ•°ä¹‹é—´ä¸è¦å†²çªã€‚</p>
</blockquote>

<h1 id="logrotate-æœºåˆ¶å’ŒåŸç†">logrotate æœºåˆ¶å’ŒåŸç†</h1>

<p><a href="https://www.lightxue.com/how-logrotate-works">logrotateæœºåˆ¶å’ŒåŸç†</a></p>

<h1 id="see-also">See Also</h1>

<blockquote>
<p>Thanks to the authors ğŸ™‚</p>
</blockquote>

<ul>
<li><a href="https://renwole.com/archives/927">å¦‚ä½•åœ¨Centos 7ä¸Šç”¨Logrotateç®¡ç†æ—¥å¿—æ–‡ä»¶</a></li>
<li><a href="https://elbarco.cn/2016/06/30/%E4%BD%BF%E7%94%A8Logrotate%E7%AE%A1%E7%90%86MongoDB%E6%97%A5%E5%BF%97/#%E9%80%89%E5%9E%8B">ä½¿ç”¨Logrotateç®¡ç†MongoDBæ—¥å¿—</a></li>
<li><a href="https://www.cnblogs.com/kevingrace/p/6307298.html">è¿ç»´ä¸­çš„æ—¥å¿—åˆ‡å‰²æ“ä½œæ¢³ç†ï¼ˆLogrotate/python/shellè„šæœ¬å®ç°ï¼‰</a></li>
</ul>

<p><a href="#content"><strong>è¿”å›ç›®å½•</strong></a></p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">zher</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2018-05-11
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/linux/">linux</a>
          <a href="/tags/tools/">tools</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/footprint/20180520-%E5%8D%83%E5%B2%9B%E6%B9%96/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">ã€å¿ƒä¹‹æ‰€å‘ï¼Œç´ å±¥ä»¥å¾€ã€â€” åƒå²›æ¹–</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/tech/db/mongodb/20180511-use-logrotate-to-manage-logs/">
            <span class="next-text nav-default">MongoDB | ä½¿ç”¨ logrotate ç®¡ç†æ—¥å¿—</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '2018-05-11 17:53:01 \x2b0800 CST',
        title: 'Linux | Tools | Logrotate ä½¿ç”¨æ€»ç»“',
        clientID: '4357c1dbcf7ef0515c29',
        clientSecret: '1ad00adfd9544bff956529daf898d4b81fed2a9d',
        repo: 'blog-comments',
        owner: 'ijayer',
        admin: ['ijayer'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:zhezh.boy@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/JayerCheung" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.facebook.com/zhe.zh.54" class="iconfont icon-facebook" title="facebook"></a>
      <a href="https://plus.google.com/u/0/103084907763171979239" class="iconfont icon-google" title="google"></a>
      <a href="https://github.com/ijayer" class="iconfont icon-github" title="github"></a>
      <a href="https://weibo.com/p/1005053510554731/home?from=page_100505&amp;mod=TAB&amp;is_all=1#place" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/boy-zhe/activities" class="iconfont icon-zhihu" title="zhihu"></a>
      <a href="https://www.instagram.com/zher09/" class="iconfont icon-instagram" title="instagram"></a>
  <a href="https://ijayer.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> site pv: <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> site uv: <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2018 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">jayer</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123995495-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
